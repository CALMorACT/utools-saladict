(window.saladictJSONP=window.saladictJSONP||[]).push([[7],{1144:function(e,t,n){e.exports=n(1289)},1145:function(e,t,n){"use strict";(function(e){var t=n(203),r=n.n(t),a=n(3),s=n(877),o=n(878),i=n(31),c=n(56),l=n(668),u=n(585),h=n(615);n(626);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){return function(t){/^(oninstall|update)$/.test(t)&&(Object(a.b)(e),browser.notifications.getAll().then(e=>{Object.keys(e).forEach(e=>browser.notifications.clear(e))}))}}function w(e){setTimeout(()=>{const t=window.appConfig.langCode.startsWith("zh"),n=t?/^\d+\..+/gm:/^ {3}.+/gm,r=e.body?(e.body.match(n)||[]).map((e,t)=>"".concat(t+1,". ")+e.slice(3).replace(/\[(.+)\](?:\(\S+\)|\[\S+\])/g,"$1")).join("\n"):"";if(e.tag_name){const n={type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:t?"沙拉查词已更新到 ".concat(e.tag_name):"Saladict has updated to ".concat(e.tag_name),message:r,priority:2,eventTime:Date.now()+5e3};window.navigator.userAgent.includes("Firefox")||(n.buttons=[{title:t?"查看更新介绍":"More Info"}],n.silent=!0),browser.notifications.create("oninstall",n)}},5e3)}async function m(){(await browser.tabs.query({})).forEach(async e=>{if(e.id&&e.url&&e.url.startsWith("http"))try{await Object(l.a)(e)}catch(e){console.warn(e)}})}browser.runtime.onInstalled.addListener((async function(t){let{reason:n,previousVersion:s}=t;if(window.appConfig=await Object(i.d)(),window.activeProfile=await Object(c.j)(),await a.c.local.set(r()(await a.c.local.get(null),(e,t)=>t.startsWith("dict_")?null:"lastCheckUpdate"===t?Date.now():e)),"install"===n)(await a.c.sync.get("hasInstructionsShown")).hasInstructionsShown||(Object(a.b)("https://saladict.crimx.com/notice.html"),a.c.sync.set({hasInstructionsShown:!0}));else if("update"===n){let t;if(!e.env.DEV_BUILD)try{const e=await fetch("https://api.github.com/repos/crimx/ext-saladict/releases/latest");t=await e.json()}catch(e){}if(t)if(t.name&&t.name.endsWith("#")||!s)w(t);else if(s){const e=s.split("."),n=browser.runtime.getManifest().version.split(".");(+e[0]<+n[0]||e[0]===n[0]&&+e[1]<+n[1])&&w(t)}}m()})),browser.runtime.onStartup.addListener((function(){a.c.local.get("lastCheckUpdate").then(t=>{let{lastCheckUpdate:n}=t;const r=Date.now();if(n&&r-n<1728e6||Object(o.a)().then(e=>{let{info:t,isAvailable:n}=e;if(a.c.local.set({lastCheckUpdate:r}),n){const e={type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:decodeURI("%E6%B2%99%E6%8B%89%E6%9F%A5%E8%AF%8D"),message:"可更新至【".concat(t.tag_name,"】")};navigator.userAgent.includes("Firefox")||(e.buttons=[{title:"查看更新"}]),browser.notifications.create("update",e)}}),!e.env.DEV_BUILD&&n&&s.a){const e=Math.floor((r-n)/24/60/60/1e3);if(e>0&&e%7==0){const e={type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:decodeURI("%E6%B2%99%E6%8B%89%E6%9F%A5%E8%AF%8D"),message:decodeURI("%E6%AD%A4%E3%80%8C%E6%B2%99%E6%8B%89%E6%9F%A5%E8%AF%8D%E3%80%8D%E6%89%A9%E5%B1%95%E5%B7%B2%E8%A2%AB%E4%BA%8C%E6%AC%A1%E6%89%93%E5%8C%85%EF%BC%8C%E8%AF%B7%E5%9C%A8%E5%AE%98%E6%96%B9%E5%BB%BA%E8%AE%AE%E7%9A%84%E5%B9%B3%E5%8F%B0%E5%AE%89%E8%A3%85%E3%80%82")};navigator.userAgent.includes("Firefox")||(e.buttons=[{title:decodeURI("%E6%9F%A5%E7%9C%8B%E5%8F%AF%E9%9D%A0%E7%9A%84%E5%B9%B3%E5%8F%B0")}]),browser.notifications.create("update",e)}}}),setTimeout(()=>{m()},1e3)})),browser.notifications.onClicked.addListener(g("https://github.com/crimx/ext-saladict/releases")),browser.notifications.onButtonClicked&&browser.notifications.onButtonClicked.addListener(g("https://github.com/crimx/ext-saladict/releases")),browser.commands.onCommand.addListener((function(e){switch(e){case"toggle-active":Object(i.f)(p({},window.appConfig,{active:!window.appConfig.active}));break;case"toggle-instant":browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{e.length<=0||null==e[0].id||a.a.send(e[0].id,{type:"QUERY_PANEL_STATE",payload:"widget.isPinned"}).then(e=>{const t=window.appConfig,{enable:n}=t[e?"pinMode":"mode"].instant;Object(i.f)(p({},t,{mode:p({},t.mode,{instant:p({},t.mode.instant,{enable:!n})}),pinMode:p({},t.pinMode,{instant:p({},t.pinMode.instant,{enable:!n})})}))})});break;case"open-quick-search":h.a.getInstance().openQSPanel();break;case"open-google":u.a.openGoogle();break;case"open-youdao":u.a.openYoudao();break;case"open-pdf":u.a.openPDF();break;case"search-clipboard":h.a.getInstance().searchClipboard()}}))}).call(this,n(59))},1146:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return i}));var r=n(4),a=n(881);let s;const o=(e,t,n)=>{const r="default"===n.dicts.all.baidu.options.tl?"zh-CN"===t.langCode?"zh":"zh-TW"===t.langCode?"cht":"en":n.dicts.all.baidu.options.tl;return"https://fanyi.baidu.com/#auto/".concat(r,"/").concat(e)},i=async(t,n,o,i)=>{const c=o.dicts.all.baidu.options,l=(()=>s=s||new a.Baidu({env:"ext",config:e.env.BAIDU_APPID&&e.env.BAIDU_KEY?{appid:e.env.BAIDU_APPID,key:e.env.BAIDU_KEY}:void 0}))();let u=i.sl||await l.detect(t);const h=i.tl||Object(r.d)(u,o.dicts.all.baidu,n);i.isPDF&&!c.pdfNewline&&(t=t.replace(/\n+/g," "));try{const e=await l.translate(t,u,h);return{result:{id:"baidu",sl:e.from,tl:e.to,langcodes:l.getSupportLanguages(),searchText:e.origin,trans:e.trans},audio:{us:e.trans.tts}}}catch(e){return{result:{id:"baidu",sl:u,tl:h,langcodes:l.getSupportLanguages(),searchText:{paragraphs:[""]},trans:{paragraphs:[""]}}}}}}.call(this,n(59))},1147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(158).__exportStar(n(1148),t)},1148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.languages=["af","am","ar","auto","az","be","bg","bn","bs","ca","ceb","co","cs","cy","da","de","el","en","eo","es","et","eu","fa","fi","fil","fj","fr","fy","ga","gd","gl","gu","ha","haw","he","hi","hmn","hr","ht","hu","hy","id","ig","is","it","ja","jw","ka","kk","km","kn","ko","ku","ky","la","lb","lo","lt","lv","mg","mi","mk","ml","mn","mr","ms","mt","mww","my","ne","nl","no","ny","otq","pa","pl","ps","pt","ro","ru","sd","si","sk","sl","sm","sn","so","sq","sr","sr-Cyrl","sr-Latn","st","su","sv","sw","ta","te","tg","th","tlh","tlh-Qaak","to","tr","ty","uk","ur","uz","vi","wyw","xh","yi","yo","yua","yue","zh-CN","zh-TW","zu"]},1149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e)}}t.TranslateError=r},1150:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(158).__importDefault(n(843)),a=n(1167),s=n(1168);t.Translator=class{constructor(e={}){this.env=e.env||"node",this.axios=e.axios||r.default,this.config=e.config||{}}async translate(e,t,n,r={}){return{...await this.query(e,t,n,{...this.config,...r}),engine:this.name}}request(e,t){return"ext"===this.env&&t&&t.headers?this.axios(e,a.modifyExtraHeaders(e,t)):this.axios(e,t)}async detect(e){return s.detectLang(e)}textToSpeech(e,t,n){return Promise.resolve(null)}}},1167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="undefined"!=typeof browser?browser:"undefined"!=typeof chrome?chrome:null,a={},s=/^(Origin|Referer|Host|Cookie|User-Agent|DNT|Accept-Charset|Accept-Encoding)$/i,o=/^(Origin|Referer)$/i;t.modifyExtraHeaders=(e,t)=>{if(!t.headers)return t;const n=Object.keys(t.headers),i={};let c;for(let e=0;e<n.length;e++){const r=n[e];s.test(r)?o.test(r)&&(c=t.headers[r]):i[r]=t.headers[r]}return c&&r?function(e,t){const n=new URL(e).origin+"/*";if(a[n])return;a[n]=!0;const s=["blocking","requestHeaders"];r.webRequest.OnBeforeSendHeadersOptions&&r.webRequest.OnBeforeSendHeadersOptions.hasOwnProperty("EXTRA_HEADERS")&&s.push("extraHeaders"),r.webRequest.onBeforeSendHeaders.addListener(e=>{if(e&&e.requestHeaders){const n=e.requestHeaders.filter(e=>!o.test(e.name));return n.push({name:"Origin",value:t},{name:"Referer",value:t}),{requestHeaders:n}}return e},{urls:[n]},s)}(e,c):console.warn("Missing Browser Global"),{...t,headers:i}}},1168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(158).__importDefault(n(852)),a=new Map([["eng","en"],["jpn","ja"],["kor","ko"],["cmn","zh-CN"]]),s={minLength:1,whitelist:[...a.keys()]};t.detectLang=function(e){return a.get(r.default(e,s))||"auto"}},1180:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return s})),n.d(t,"search",(function(){return i}));var r=n(40),a=n(4);const s=e=>"https://cn.bing.com/dict/search?q=".concat(e),o="https://cn.bing.com",i=(e,t,n,s)=>{const i=n.dicts.all.bing;return Object(r.a)("https://cn.bing.com/dict/clientsearch?mkt=zh-CN&setLang=zh&form=BDVEHC&ClientVer=BDDTV3.5.1.4320&q="+encodeURIComponent(e.replace(/\s+/g," "))).catch(a.g).then(e=>{const n="zh-TW"===t.langCode;return e.querySelector(".client_def_hd_hd")?function(e,t,n){let r={result:{type:"lex",title:Object(a.f)(e,".client_def_hd_hd",n)}};if(t.phsym){let t=Array.from(e.querySelectorAll(".client_def_hd_pn_list"));t.length>0&&(r.result.phsym=t.map(e=>{let t="",n=e.querySelector(".client_aud_o");return n&&(t=((n.getAttribute("onclick")||"").match(/https.*\.mp3/)||[""])[0]),{lang:Object(a.f)(e,".client_def_hd_pn"),pron:t}}),r.audio=r.result.phsym.reduce((e,t)=>{let{lang:n,pron:r}=t;return/us|美/i.test(n)?e.us=r:/uk|英/i.test(n)&&(e.uk=r),e},{}))}if(t.cdef){let t=e.querySelector(".client_def_container");if(t){let e=Array.from(t.querySelectorAll(".client_def_bar"));e.length>0&&(r.result.cdef=e.map(e=>({pos:Object(a.f)(e,".client_def_title_bar",n),def:Object(a.f)(e,".client_def_list",n)})))}}if(t.tense){let t=Array.from(e.querySelectorAll(".client_word_change_word"));t.length>0&&(r.result.infs=t.map(e=>(e.textContent||"").trim()))}if(t.sentence>0){let s=e.querySelectorAll(".client_sentence_list");const i=[];for(let e=0;e<s.length&&i.length<t.sentence;e++){const t=s[e];let r="";const c=t.querySelector(".client_aud_o");c&&(r=((c.getAttribute("onclick")||"").match(/https.*\.mp3/)||[""])[0]),t.querySelectorAll(".client_sen_en_word").forEach(e=>{e.outerHTML=Object(a.f)(e)}),t.querySelectorAll(".client_sen_cn_word").forEach(e=>{e.outerHTML=Object(a.f)(e,n)}),t.querySelectorAll(".client_sentence_search").forEach(e=>{e.outerHTML='<span class="dictBing-SentenceItem_HL">'.concat(Object(a.f)(e),"</span>")}),i.push({en:Object(a.c)(o,t,".client_sen_en"),chs:Object(a.c)(o,t,{selector:".client_sen_cn",toChz:n}),source:Object(a.f)(t,".client_sentence_list_link"),mp3:r})}r.result.sentences=i}if(Object.keys(r.result).length>2)return r;return Object(a.h)()}(e,i.options,n):e.querySelector(".client_trans_head")?function(e,t){const n=Object(a.f)(e,".client_sen_cn",t);if(n)return{result:{type:"machine",mt:n}};return Object(a.h)()}(e,n):i.options.related&&e.querySelector(".client_do_you_mean_title_bar")?function(e,t,n){const r={result:{type:"related",title:Object(a.f)(e,".client_do_you_mean_title_bar",n),defs:[]}};if(e.querySelectorAll(".client_do_you_mean_area").forEach(e=>{const t=e.querySelectorAll(".client_do_you_mean_list");t.length>0&&r.result.defs.push({title:Object(a.f)(e,".client_do_you_mean_title",n),meanings:Array.from(t).map(e=>{const t=Object(a.f)(e,".client_do_you_mean_list_word",n);return{href:"https://cn.bing.com/dict/search?q=".concat(t),word:t,def:Object(a.f)(e,".client_do_you_mean_list_def",n)}})})}),r.result.defs.length>0)return r;return Object(a.h)()}(e,0,n):Object(a.h)()})}},1181:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getSrcPage",(function(){return i})),n.d(t,"search",(function(){return c}));var r=n(4),a=n(28),s=n(882);let o;const i=()=>"https://fanyi.caiyunapp.com/",c=async(t,n,i,c)=>{const l=i.dicts.all.caiyun.options,u=(()=>o=o||new s.Caiyun({env:"ext",config:e.env.CAIYUN_TOKEN?{token:e.env.CAIYUN_TOKEN}:void 0}))();let h=c.sl||await u.detect(t),d=c.tl||Object(r.d)(h,i.dicts.all.caiyun,n);h===d&&(Object(a.g)(t)?(h="ja","ja"===d&&(d=n.langCode.startsWith("zh")?"zh-CN":"en")):Object(a.c)(t)?(h="zh-CN","zh-CN"===d&&(d="en")):(h="en","en"===d&&(d="zh-CN"))),c.isPDF&&!l.pdfNewline&&(t=t.replace(/\n+/g," "));try{const e=await u.translate(t,h,d);return{result:{id:"caiyun",sl:e.from,tl:e.to,langcodes:u.getSupportLanguages(),searchText:e.origin,trans:e.trans},audio:{us:e.trans.tts}}}catch(e){return{result:{id:"caiyun",sl:h,tl:d,langcodes:u.getSupportLanguages(),searchText:{paragraphs:[""]},trans:{paragraphs:[""]}}}}}}.call(this,n(59))},1185:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return i})),n.d(t,"search",(function(){return l}));var r=n(176),a=n(40),s=n(37),o=n(4);const i=(e,t)=>{switch(t.langCode){case"en":return"https://dictionary.cambridge.org/search/english/direct/?q=".concat(e.trim().split(/\s+/).join("-"));case"zh-CN":return"https://dictionary.cambridge.org/zhs/搜索/英语-汉语-简体/direct/?q=".concat(e);case"zh-TW":return"https://dictionary.cambridge.org/zht/搜索/英語-漢語-繁體/direct/?q=".concat(Object(r.a)(e))}},c="https://dictionary.cambridge.org",l=(e,t,n,r)=>{const s="zh-CN"===t.langCode?"https://dictionary.cambridge.org/zhs/搜索/英语-汉语-简体/direct/?q=":"zh-TW"===t.langCode?"https://dictionary.cambridge.org/zht/搜索/英語-漢語-繁體/direct/?q=":"https://dictionary.cambridge.org/search/english/direct/?q=";return Object(a.a)(encodeURI(s)+e.toLocaleLowerCase().replace(/[^A-Za-z0-9]+/g,"-")).catch(o.g).then(u)};function u(e){const t=[],n={};return e.querySelectorAll(".entry-body__el").forEach(e=>{if(!Object(o.f)(e,".headword"))return;const r=e.querySelector(".pos-header");r&&(r.querySelectorAll(".dpron-i").forEach(e=>{const t=e.querySelector(".daud");if(!t)return;const r=t.querySelector('source[type="audio/mpeg"]');if(!r)return;const a=Object(o.b)("https://dictionary.cambridge.org",r,"src");a&&(t.replaceWith(Object(s.d)(a)),!n.uk&&e.classList.contains("uk")&&(n.uk=a),!n.us&&e.classList.contains("us")&&(n.us=a))}),Object(o.i)(r,".share")),e.querySelectorAll(".daccord_h").forEach(e=>{e.parentElement.classList.add("amp-accordion")}),e.querySelectorAll("a.had").forEach(o.a),t.push(Object(o.c)(c,e))}),t.length>0?{result:t,audio:n}:Object(o.h)()}},1186:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return s})),n.d(t,"search",(function(){return i}));var r=n(40),a=n(4);const s=e=>"http://dict.cnki.net/dict_result.aspx?searchword="+encodeURIComponent(e),o="http://dict.cnki.net",i=(e,t,n,s)=>Object(r.a)("http://dict.cnki.net/dict_result.aspx?searchword="+encodeURIComponent(e),{withCredentials:!1}).catch(a.g).then(e=>(function(e,t){const n=[...e.querySelectorAll(".main-table")],r={dict:[],senbi:c(n,'img[src="images/word.jpg"]',"showjd_"),seneng:c(n,'img[src="images/dian_ywlj.gif"]',"showlj_")};if(t.dict){const e=n.find(e=>Boolean(e.querySelector('img[src="images/02.gif"]')));e&&(r.dict=[...e.querySelectorAll(".zztj li")].map(e=>{const t=(e.textContent||"").trim();if(t){const n=e.querySelector("a:nth-of-type(2)");if(n){const e=Object(a.b)(o,n,"href");if(e)return{word:t,href:e}}}}).filter(e=>Boolean(e)))}if(r.dict.length>0||r.senbi.length>0||r.seneng.length>0)return{result:r};return Object(a.h)()})(e,n.dicts.all.cnki.options));function c(e,t,n){const r=e.find(e=>Boolean(e.querySelector(t)));return r?[...r.querySelectorAll("[id^=".concat(n,"]"))].map(e=>{let t="";return e.querySelectorAll("td[align=right]").forEach(e=>{if("更多"===(e.textContent||"").trim()){const n=e.querySelector("a");n&&(t=Object(a.b)(o,n,"href"))}e.remove()}),{title:Object(a.f)(e.previousElementSibling).trim(),more:t,sens:[...e.querySelectorAll("td")].map(e=>Object(a.c)(o,e).replace(/&nbsp;/g,""))}}):[]}},1187:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return i}));var r=n(40),a=n(4),s=n(37);const o=e=>"https://www.collinsdictionary.com/dictionary/english/".concat(e),i=(e,t,n,s)=>{e=encodeURIComponent(e.replace(/\s+/g," "));const o="zh-TW"===t.langCode,{options:i}=n.dicts.all.cobuild,u=[["https://www.collinsdictionary.com/dictionary/english/",l],["http://www.iciba.com/",c]];return i.cibaFirst&&u.reverse(),Object(r.a)(u[0][0]+e).then(e=>u[0][1](e,o)).catch(()=>Object(r.a)(u[1][0]+e).catch(a.g).then(e=>u[1][1](e,o)))};async function c(e,t){const n={type:"ciba",title:"",defs:[]},r={};if(n.title=Object(a.f)(e,".keyword",t),!n.title)return Object(a.h)();n.level=Object(a.f)(e,".base-level");let s=e.querySelector('.word-rate [class^="star"]');if(s){let e=Number(s.className[s.className.length-1]);isNaN(e)||(n.star=e)}let o=e.querySelector(".base-speak");o&&(n.prons=Array.from(o.children).map(e=>{const t=(e.textContent||"").trim(),n=(/http\S+.mp3/.exec(e.innerHTML)||[""])[0];return-1!==t.indexOf("英")?r.uk=n:-1!==t.indexOf("美")&&(r.us=n),{phsym:t,audio:n}}));let i=Array.from(e.querySelectorAll(".info-article")).find(e=>/柯林斯高阶英汉双解学习词典/.test(e.textContent||""));return i&&(n.defs=Array.from(i.querySelectorAll(".prep-order")).map(e=>Object(a.c)("http://www.iciba.com",e,{toChz:t}))),n.defs.length>0?{result:n,audio:r}:Object(a.h)()}async function l(e,t){const n={type:"collins",sections:[]},r={};return n.sections=[...e.querySelectorAll("[data-type-block]")].filter(e=>{const t=e.dataset.typeBlock||"";return t&&"Video"!==t&&"Trends"!==t}).map(e=>{const n=e.dataset.typeBlock||"",o=e.dataset.titleBlock||"",i=e.dataset.numBlock||"";if("Learner"===n){if(!r.uk){const t=u(e);t&&(r.uk=t)}}else"English"===n?r.uk=u(e):"American"===n&&(r.us=u(e));return e.querySelectorAll(".audio_play_button").forEach(e=>{e.replaceWith(Object(s.d)(e.dataset.srcMp3))}),e.querySelectorAll("a.type-thesaurus").forEach(a.a),{id:n+o+i,className:e.className||"",type:n,title:o,num:i,content:Object(a.c)("https://www.collinsdictionary.com",e,{toChz:t})}}),n.sections.length>0?{result:n,audio:r}:Object(a.h)()}function u(e){const t=e.querySelector(".pron .audio_play_button");if(t){const e=t.dataset.srcMp3;if(e)return e}}},1188:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return s})),n.d(t,"search",(function(){return i}));var r=n(40),a=n(4);const s=e=>"http://www.etymonline.com/search?q=".concat(e),o="https://www.etymonline.com",i=(e,t,n,s)=>{const i=n.dicts.all.etymonline.options;return e=encodeURIComponent(e.replace(/\s+/g," ")),Object(r.a)("https://www.etymonline.com/word/"+e).catch(()=>Object(r.a)("https://www.etymonline.com/search?q="+e)).catch(a.g).then(e=>(function(e,t){const n=[],r=Array.from(e.querySelectorAll('[class*="word--"]'));for(let e=0;e<r.length&&n.length<t.resultnum;e++){const s=r[e],i=Object(a.f)(s,'[class*="word__name--"]');if(!i)continue;let c="";const l=s.querySelector('[class*="word__defination--"]>*');if(l&&(l.querySelectorAll(".crossreference").forEach(e=>{const t=Object(a.f)(e),n=document.createElement("a");n.target="_blank",n.href="https://www.etymonline.com/word/".concat(t),n.textContent=t,e.replaceWith(n)}),c=Object(a.c)(o,l)),!c)continue;const u=Object(a.b)(o,s,"href");let h="";if(t.chart){const e=s.querySelector('[class*="chart--"] img');e&&(h=Object(a.b)(o,e,"src"))}n.push({href:u,title:i,def:c,chart:h})}if(n.length>0)return{result:n};return Object(a.h)()})(e,i))}},1189:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return s})),n.d(t,"search",(function(){return o}));var r=n(40),a=n(4);const s=e=>"https://dict.eudic.net/dicts/en/".concat(e),o=(e,t,n,s)=>{e=encodeURIComponent(e.split(/\s+/).slice(0,2).join(" "));const o=n.dicts.all.eudic.options;return Object(r.a)("https://dict.eudic.net/dicts/en/"+e,{withCredentials:!1}).catch(a.g).then(i).then(e=>(function(e,t){let{resultnum:n}=t;const r=[],s={},o=Array.from(e.querySelectorAll("#lj_ting .lj_item"));for(let e=0;e<o.length&&r.length<n;e++){const t=o[e],n={chs:"",eng:""};if(n.chs=Object(a.f)(t,".exp"),!n.chs)continue;if(n.eng=Object(a.f)(t,".line"),!n.eng)continue;n.channel=Object(a.f)(t,".channel_title");const i=t.getAttribute("source");if(i){const e="https://fs-gateway.eudic.net/store_main/sentencemp3/"+i+".mp3";n.mp3=e,s.us||(s.us=e,s.uk=e)}r.push(n)}if(r.length>0)return{result:r,audio:s};return Object(a.h)()})(e,o))};function i(e){if(e.querySelector("#TingLiju"))return e;const t=e.querySelector("#page-status");if(!t||!t.value)return Object(a.h)();const n=new FormData;return n.append("status",t.value),Object(r.a)("https://dict.eudic.net/Dicts/en/tab-detail/-12",{method:"POST",data:n,withCredentials:!1})}},1190:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return i}));var r=n(4),a=n(883);let s;const o=(e,t,n)=>{const r=n.dicts.all.google.options.cnfirst?"cn":"com",a="default"===n.dicts.all.google.options.tl?t.langCode:n.dicts.all.google.options.tl;return"https://translate.google.".concat(r,"/#auto/").concat(a,"/").concat(e)},i=async(t,n,o,i)=>{const c=o.dicts.all.google.options,l=(()=>s=s||new a.Google({env:"ext"}))(),u=i.sl||await l.detect(t),h=i.tl||Object(r.d)(u,o.dicts.all.google,n);i.isPDF&&!c.pdfNewline&&(t=t.replace(/\n+/g," "));try{const n=await l.translate(t,u,h,{token:e.env.GOOGLE_TOKEN,concurrent:c.concurrent,order:c.cnfirst?["cn","com"]:["com","cn"],apiAsFallback:!0});return{result:{id:"google",sl:n.from,tl:n.to,langcodes:l.getSupportLanguages(),searchText:n.origin,trans:n.trans},audio:{us:n.trans.tts}}}catch(e){return{result:{id:"google",sl:u,tl:h,langcodes:l.getSupportLanguages(),searchText:{paragraphs:[""]},trans:{paragraphs:[""]}}}}}}.call(this,n(59))},1191:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length-2;n+=3){var r="a"<=(r=t.charAt(n+2))?r.charCodeAt(0)-87:Number(r);r="+"==t.charAt(n+1)?e>>>r:e<<r;e="+"==t.charAt(n)?e+r&4294967295:e^r}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.getTK=function(e,t,n){t=Number(t)||0;let a=[],s=0,o=0;for(;o<e.length;o++){let t=e.charCodeAt(o);128>t?a[s++]=t:(2048>t?a[s++]=t>>6|192:(55296==(64512&t)&&o+1<e.length&&56320==(64512&e.charCodeAt(o+1))?(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++o)),a[s++]=t>>18|240,a[s++]=t>>12&63|128):a[s++]=t>>12|224,a[s++]=t>>6&63|128),a[s++]=63&t|128)}for(e=t,s=0;s<a.length;s++)e=r(e+=a[s],"+-a^+6");return e=r(e,"+-3^+b+-f"),0>(e^=Number(n)||0)&&(e=2147483648+(2147483647&e)),(e%=1e6).toString()+"."+(e^t)},t.fetchScheduled=async function(e,t){if(t)return new Promise((t,n)=>{let r=0;for(let a=0;a<e.length;a++)e[a]().then(t).catch(()=>{++r===e.length&&n(new Error("All rejected"))})});for(let t=0;t<e.length;t++)try{return await e[t]()}catch(e){}return Promise.reject(new Error("All rejected"))}},1194:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return i}));var r=n(4),a=n(37),s=n(40);const o=e=>"https://www.google.com.hk/search?hl=en&safe=off&q=define:".concat(e),i=async(e,t,n,o)=>{const i=n.dicts.all.googledict.options.enresult?"hl=en&gl=en&":"";return function(e){const t=(new DOMParser).parseFromString(e,"text/html").querySelector(".lr_container");if(t){return t.querySelectorAll(".vkc_np").forEach(e=>{(e.querySelector(".zbA8Me")||e.querySelector("#dw-siw")||e.querySelector("#tl_select"))&&e.remove()}),Object(r.j)(t,".lr_dct_trns_h"),Object(r.j)(t,".S5TwIf"),Object(r.j)(t,".VZVCid"),Object(r.j)(t,".u7XA4b"),t.querySelectorAll(".r3WG9c").forEach(e=>{const t=e.querySelector("audio source");if(t){const n=Object(r.b)("https://ssl.gstatic.com",t,"src");if(n)return void e.replaceWith(Object(a.d)(n))}e.remove()}),t.querySelectorAll("g-img").forEach(t=>{const n=t.querySelector("img");if(n&&n.id){const r=e.match(new RegExp('"'.concat(n.id,'":"([^"]+)"')));if(r)return n.setAttribute("src",decodeURI(r[1])),void t.replaceWith(n)}t.remove()}),Object(r.i)(t,".jFHKNd"),Object(r.j)(t,'[aria-hidden="true"]'),{result:{entry:Object(r.c)("https://www.google.com",t,{config:{}}).replace(/synonyms:/g,"syn:").replace(/antonyms:/g,"ant:")}}}return Object(r.h)()}(await Object(s.b)("https://www.google.com/search?hl=en&safe=off&".concat(i,"q=define:")+encodeURIComponent(e.replace(/\s+/g,"+"))).catch(r.g))}},1195:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return i})),n.d(t,"search",(function(){return l}));var r=n(28),a=n(4),s=n(37),o=n(40);const i=(e,t,n)=>"https://www.hjdict.com/".concat(h(e,n),"/").concat(encodeURIComponent(e)),c="https://www.hjdict.com",l=async(e,t,n,r)=>{const i={HJ_SITEID:3,HJ_UID:d(),HJ_SID:d(),HJ_SSID:d(),HJID:0,HJ_VT:2,HJ_SST:1,HJ_CSST:1,HJ_ST:1,HJ_CST:1,HJ_T:+new Date,_:d(16)};await Promise.all(Object.keys(i).map(e=>browser.cookies.set({url:"https://www.hjdict.com",domain:"hjdict.com",name:e,value:String(i[e])})));const l=r.langCode||h(e,n);return Object(o.a)("https://www.hjdict.com/".concat(l,"/").concat(encodeURIComponent(e)),{withCredentials:!0}).catch(a.g).then(e=>(function(e,t,n){if(e.querySelector(".word-notfound"))return u(n);const r=e.querySelector(".word-suggestions");if(r)return t.related?{result:{type:"related",langCode:n,content:Object(a.c)(c,r)}}:u(n);let o="";const i=e.querySelector(".word-details-multi .word-details-header");i&&(i.querySelectorAll(".word-details-tab").forEach((e,t)=>{e.dataset.categories=String(t)}),o=Object(a.c)(c,i));e.querySelectorAll(".word-audio").forEach(e=>{e.replaceWith(Object(s.d)(e.dataset.src))});const l=[...e.querySelectorAll(".word-details-pane")].map((e,t)=>'\n      <div class="word-details-pane'.concat(0===t?" word-details-pane-active":"",'">\n        <div class="word-details-pane-header">\n          ').concat(Object(a.c)(c,e,".word-details-pane-header"),'\n        </div>\n        <div class="word-details-pane-content">\n          ').concat(Object(a.c)(c,e,".word-details-pane-content"),"\n        </div>\n      </div>\n    "));return l.length>0?{result:{type:"lex",header:o,entries:l,langCode:n}}:u(n)})(e,n.dicts.all.hjdict.options,l))};function u(e){return{result:{type:"related",langCode:e,content:'<p style="text-align:center;">No Result</p>'}}}function h(e,t){return/\u00fc/i.test(e)?t.dicts.all.hjdict.options.uas:/\u00e4/i.test(e)?t.dicts.all.hjdict.options.aas:/\u00e9/i.test(e)?t.dicts.all.hjdict.options.eas:Object(r.f)(e)?"fr":Object(r.d)(e)?"de":Object(r.i)(e)?"es":Object(r.e)(e)?t.dicts.all.hjdict.options.engas:Object(r.g)(e)?"jp/jc":Object(r.h)(e)?"kr":Object(r.c)(e)?t.dicts.all.hjdict.options.chsas:"w"}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n="";if("number"==typeof e)for(let t=0;t<e;t++){n+=Math.floor(10*Math.random())%2==0?"x":"y"}else n=e||"xxxxxxxx-xyxx-yxxx-xxxy-xxyxxxxxxxxx";return("number"!=typeof t||t<2||t>36)&&(t=16),n.replace(/[xy]/g,(function(e){let n=Math.random()*t|0;return("x"===e?n:3&n|8).toString(t)}))}},1196:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return i}));var r=n(40),a=n(4);function s(e,t){switch(e=encodeURIComponent(e.replace(/\s+/g,"+")),t){case"engjp":return"http://www.jukuu.com/jsearch.php?q="+e;case"zhjp":return"http://www.jukuu.com/jcsearch.php?q="+e;default:return"http://www.jukuu.com/search.php?q="+e}}const o=(e,t,n)=>s(e,n.dicts.all.jukuu.options.lang),i=(e,t,n,o)=>{const i=o.lang||n.dicts.all.jukuu.options.lang;return Object(r.a)(s(e,i)).catch(a.g).then(c).then(e=>e.length>0?{result:{lang:i,sens:e}}:Object(a.h)())};function c(e){return[...e.querySelectorAll("tr.e")].map(e=>{const t=e.lastElementChild;if(!t)return;Object(a.j)(t,"img");const n=e.nextElementSibling;if(!n||!n.classList.contains("c"))return;const r=n.nextElementSibling;return{trans:Object(a.c)("http://www.jukuu.com",t),original:Object(a.f)(n),src:r&&r.classList.contains("s")?Object(a.f)(r).replace(/^[\s-]*/,""):""}}).filter(e=>Boolean(e&&e.trans))}},1197:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return s})),n.d(t,"search",(function(){return o}));var r=n(176),a=n(793);const s=e=>"https://www.moedict.tw/~".concat(Object(r.b)(e)),o=(e,t,n,r)=>Object(a.moedictSearch)("c",e,t).then(e=>(e.result.h&&e.result.h.forEach(e=>{e.p&&(e.p=e.p.replace("<br>陸⃝"," [大陆]: "))}),e))},1198:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return c}));var r=n(40),a=n(4),s=n(37);const o=e=>"https://www.ldoceonline.com/dictionary/".concat(e.trim().split(/\s+/).join("-")),i="https://www.ldoceonline.com",c=(e,t,n,o)=>{const c=n.dicts.all.longman.options;return Object(r.a)("http://www.ldoceonline.com/dictionary/"+e.toLocaleLowerCase().replace(/[^A-Za-z0-9]+/g,"-")).catch(a.g).then(e=>(function(e,t){if(e.querySelector(".dictentry"))return function(e,t){const n={type:"lex",bussinessFirst:t.bussinessFirst,contemporary:[],bussiness:[]},r={};e.querySelectorAll(".speaker.exafile").forEach(e=>{const t=e.dataset.srcMp3;if(t){const n=e.parentElement;e.replaceWith(Object(s.d)(t)),n&&n.classList.contains("EXAMPLE")&&n.classList.add("withSpeaker")}}),t.wordfams&&(n.wordfams=Object(a.c)(i,e,".wordfams"));const o=e.querySelectorAll(".dictentry");let c="";for(let e=0;e<o.length;e++){const s=o[e],l=s.querySelector(".dictionary_intro");if(l){const e=l.textContent||"";c=e.includes("Contemporary")?"contemporary":e.includes("Business")?"bussiness":""}if(!c)continue;const u={title:{HWD:"",HYPHENATION:"",HOMNUM:""},prons:[],senses:[]},h=s.querySelector("a.topic");h&&(u.topic={title:h.textContent||"",href:Object(a.b)(i,h,"href")});const d=s.querySelector(".Head");if(!d)continue;u.title.HWD=Object(a.f)(d,".HWD"),u.title.HYPHENATION=Object(a.f)(d,".HYPHENATION"),u.title.HOMNUM=Object(a.f)(d,".HOMNUM"),u.phsym=Object(a.f)(d,".PronCodes");const p=d.querySelector(".LEVEL");if(p){const e={rate:0,title:""};e.rate=((p.textContent||"").match(/●/g)||[]).length,e.title=p.title,u.level=e}u.freq=Array.from(d.querySelectorAll(".FREQ")).map(e=>({title:e.title,rank:e.textContent||""})),u.pos=Object(a.f)(d,".POS"),d.querySelectorAll(".speaker").forEach(e=>{let t="us";e.title.includes("British")&&(t="uk");const n=e.getAttribute("data-src-mp3")||"";r[t]=n,u.prons.push({lang:t,pron:n})}),u.senses=Array.from(s.querySelectorAll(".Sense")).map(e=>Object(a.c)(i,e)),t.collocations&&(u.collocations=Object(a.c)(i,s,".ColloBox")),t.grammar&&(u.grammar=Object(a.c)(i,s,".GramBox")),t.thesaurus&&(u.thesaurus=Object(a.c)(i,s,".ThesBox")),t.examples&&(u.examples=Array.from(s.querySelectorAll(".exaGroup")).map(e=>Object(a.c)(i,e))),n[c].push(u)}if(n.contemporary.length<=0&&n.bussiness.length<=0)return Object(a.h)();return{result:n,audio:r}}(e,t);if(t.related)return function(e){const t=e.querySelector(".didyoumean");if(t)return{result:{type:"related",list:Object(a.c)(i,t)}};return Object(a.h)()}(e);return Object(a.h)()})(e,c))}},1199:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return c}));var r=n(40),a=n(60),s=n(4);const o=e=>"http://www.macmillandictionary.com/dictionary/british/".concat(e.trim().split(/\s+/).join("-")),i="http://www.macmillandictionary.com",c=(e,t,n,a)=>{const o=n.dicts.all.macmillan.options;return Object(r.a)("http://www.macmillandictionary.com/dictionary/british/"+e.toLocaleLowerCase().replace(/[^A-Za-z0-9]+/g,"-")).catch(s.g).then(e=>(function(e,t){if(e.querySelector(".senses .SENSE"))return Promise.resolve(e).then(l).then(u);if(t.related){const t=e.querySelector("#search-results ul");if(t)return{result:{type:"related",list:Object(s.c)(i,t)}}}return Object(s.h)()})(e,o))};function l(e){const t=e.querySelector('link[rel="canonical"]');if(!t)return[e];const n=(/[^/]+(?=_\d+$)/.exec(t.href)||[""])[0];if(!n)return[e];const s=new RegExp(n+"_\\d+$"),o=Array.from(e.querySelectorAll("#relatedentries li a")).filter(e=>s.test(e.href));return o.length<=0?[e]:Object(a.b)(o.map(e=>Object(r.a)(e.href))).then(t=>[e,...t.filter(e=>!!e)])}function u(e){let t=e.map(h).filter(e=>!!e);if(t.length>0){const e=t.find(e=>{let{audio:t}=e;return t&&t.uk}),n=e?e.audio:void 0;return{result:{type:"lex",items:t.map(e=>{let{result:t}=e;return t})},audio:n}}return Object(s.h)()}function h(e){const t={title:"",senses:"",pos:"",sc:"",phsym:""},n={},r=e.querySelector("#headword .BASE");if(!r)return null;if(t.title=r.textContent||"",!t.title)return null;const a=e.querySelector("#headbar");if(a){const e=a.querySelector(".PART-OF-SPEECH");e&&(t.pos=(e.textContent||"").toUpperCase());const r=a.querySelector(".SYNTAX-CODING");r&&(t.sc=r.textContent||"");const s=a.querySelector(".PRON");s&&(t.phsym=s.textContent||"");const o=a.querySelector(".PRONS .sound");o&&o.dataset.srcMp3&&(t.pron=o.dataset.srcMp3,n.uk=t.pron)}const o=e.querySelector(".stars_grp");o&&(t.ratting=o.querySelectorAll(".icon_star").length);const c=e.querySelector(".senses");return c&&c.querySelectorAll(".SENSE").length>0?(c.querySelectorAll("a.moreButton").forEach(s.a),t.senses=Object(s.c)(i,c),{result:t,audio:n}):null}},1200:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return i})),n.d(t,"search",(function(){return c}));var r=n(4),a=n(147),s=n.n(a);const o="E62VyFVLMiW7kvbtVq3p",i=async e=>{const t=await l(e).catch(()=>null);if(t){const e=t.searchResults&&t.searchResults[0]&&t.searchResults[0].tarId;if(e)return"https://www.mojidict.com/details/".concat(e)}return"https://www.mojidict.com"},c=async(e,t,n,a)=>{const i=await l(e),c=i.searchResults&&i.searchResults[0]&&i.searchResults[0].tarId;if(!c)return Object(r.h)();const{data:{result:d}}=await s()({method:"post",url:"https://api.mojidict.com/parse/functions/fetchWord_v2",headers:{"content-type":"text/plain"},data:JSON.stringify({wordId:c,_ApplicationId:o,_ClientVersion:"js2.7.1",_InstallationId:h()})}),p={};return d&&(d.details||d.word)?(d.word&&(p.word={spell:d.word.spell,pron:"".concat(d.word.pron||""," ").concat(d.word.accent||""),tts:await u(d.word.spell,d.word.objectId)}),d.details&&(p.details=d.details.map(e=>({title:e.title,subdetails:d.subdetails&&d.subdetails.filter(t=>t.detailsId===e.objectId).map(e=>({title:e.title,examples:d.examples&&d.examples.filter(t=>t.subdetailsId===e.objectId)}))}))),i.words&&i.words.length>1&&(p.releated=i.words.map(e=>({title:"".concat(e.spell," | ").concat(e.pron||""," ").concat(e.accent||""),excerpt:e.excerpt})).slice(1)),p.word&&p.word.tts?{result:p,audio:{py:p.word.tts}}:{result:p}):Object(r.h)()};async function l(e){try{const{data:{result:t}}=await s()({method:"post",url:"https://api.mojidict.com/parse/functions/search_v3",headers:{"content-type":"text/plain"},data:JSON.stringify({langEnv:"zh-CN_ja",needWords:!0,searchText:e,_ApplicationId:o,_ClientVersion:"js2.7.1",_InstallationId:h()})});return t||Object(r.h)()}catch(e){return Object(r.g)()}}async function u(e,t){try{const{data:n}=await s()({method:"post",url:"https://api.mojidict.com/parse/functions/fetchTts",headers:{"content-type":"text/plain"},data:JSON.stringify({identity:t,text:e,_ApplicationId:o,_ClientVersion:"js2.7.1",_InstallationId:h()})});if(n.result&&n.result.url)return n.result.url}catch(e){}return""}function h(){return d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d()}function d(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}},1201:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return i}));var r=n(40),a=n(4),s=n(28);const o=e=>Object(s.g)(e)?"https://ja.dict.naver.com/search.nhn?range=all&q=".concat(encodeURIComponent(e)):"https://zh.dict.naver.com/#/search?query=".concat(encodeURIComponent(e)),i=(e,t,n,o)=>{const{options:i}=n.dicts.all.naver;return"ja"===o.lang||i.hanAsJa||Object(s.g)(e)||i.korAsJa&&Object(s.h)(e)?async function(e){try{var t=await Object(r.a)("https://ja.dict.naver.com/search.nhn?range=all&q=".concat(encodeURIComponent(e)))}catch(e){return Object(a.g)()}const n=t.querySelector("#content");if(!n)return Object(a.h)();return Object(a.j)(n,".sorting"),Object(a.j)(n,".info_userent"),Object(a.j)(n,".view_ctrl"),Object(a.j)(n,".go_register"),Object(a.j)(n,".section_banner"),Object(a.j)(n,".conjugate"),{result:{lang:"ja",entry:Object(a.c)("https://ja.dict.naver.com",n)}}}(e):async function(e){try{var t=await Object(r.a)("http://m.cndic.naver.com/search/all?sLn=zh_CN&fromNewVer&q=".concat(encodeURIComponent(e)))}catch(e){return Object(a.g)()}let n=t.querySelector("#ct");if(!n)return Object(a.h)();return n=n.querySelector("#ct")||n,Object(a.j)(n,".recent_searches"),Object(a.j)(n,".m_tab"),Object(a.j)(n,".con_clt"),Object(a.j)(n,".info_userent"),Object(a.j)(n,".go_register"),Object(a.j)(n,".section_banner"),Object(a.j)(n,".spi_area"),Object(a.j)(n,".word_otr.word_line"),Object(a.j)(n,".common_btn_wrap.my_vlive_pageBar"),n.querySelectorAll("a.more_d").forEach(a.a),{result:{lang:"zh",entry:Object(a.c)("http://m.cndic.naver.com",n)}}}(e)}},1202:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return c}));var r=n(40),a=n(60),s=n(4);const o=e=>"https://www.oxfordlearnersdictionaries.com/definition/english/".concat(e.trim().split(/\s+/).join("-")),i="https://www.oxfordlearnersdictionaries.com",c=(e,t,n,o)=>{e=e.toLocaleLowerCase().replace(/[^A-Za-z0-9]+/g,"-");const c=n.dicts.all.oald.options;return Object(r.a)("https://www.oxfordlearnersdictionaries.com/definition/english/"+e).catch(s.g).then(t=>(function(e,t,n){if(e.querySelector("#entryContent"))return function(e,t){const n=new RegExp("/".concat(t,"_\\d+$")),s=[...e.querySelectorAll("#relatedentries .list-col a")].map(e=>e.getAttribute("href")||"").filter(e=>n.test(e));if(s.length>0)return Object(a.b)(s.map(e=>Object(r.a)(e))).then(t=>[e,...t.filter(e=>!!e)]);return Promise.resolve([e])}(e,t).then(l);if(n.related){const t=e.querySelector(".result-list");if(t)return{result:{type:"related",list:Object(s.c)(i,t)}}}return Object(s.h)()})(t,e,c))};function l(e){const t=e.map(u).filter(e=>!!e);if(t.length>0){let e=t.find(e=>{let{audio:t}=e;return t&&t.uk&&t.us});e||(e=t.find(e=>{let{audio:t}=e;return t&&(t.uk||t.us)}));const n=e?e.audio:void 0;return{result:{type:"lex",items:t.map(e=>{let{result:t}=e;return t})},audio:n}}return Object(s.h)()}function u(e){const t={title:Object(s.c)(i,e,".webtop-g"),prons:[],defs:""},n={},r=e.querySelector("#entryContent .h-g");if(!r)return null;const a=r.querySelector(".top-container");if(!a)return null;const o=a.querySelector(".pron-gs");return o&&o.querySelectorAll(".pron-g").forEach(e=>{const r=e.querySelector(".audio_play_button");if(!r)return;const a=r.dataset.srcMp3;a&&(r.className.includes("pron-uk")?n.uk=a:n.us=a,t.prons.push({phsym:Object(s.c)(i,e),pron:a}))}),a.remove(),t.defs=Object(s.c)(i,r),t.title&&t.defs?{result:t,audio:n}:null}},1203:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return l})),n.d(t,"search",(function(){return h}));var r=n(40),a=n(4),s=n(147),o=n.n(s),i=n(174),c=n.n(i);const l=e=>"https://www.shanbay.com/bdc/mobile/preview/word?word=".concat(e),u="http://www.shanbay.com",h=(e,t,n)=>{const s=n.dicts.all.shanbay.options;return Object(r.a)("https://www.shanbay.com/bdc/mobile/preview/word?word="+encodeURIComponent(e.replace(/\s+/g," "))).catch(a.g).then(e=>(function(e,t){if(!e.querySelector(".error-typo"))return async function(e,t){const n=e.querySelector(".word-spell"),r={id:"shanbay",type:"lex",title:Object(a.f)(e,".word-spell"),pattern:Object(a.f)(e,".pattern"),prons:[],sentences:[]},s={uk:"http://media.shanbay.com/audio/uk/"+r.title+".mp3",us:"http://media.shanbay.com/audio/us/"+r.title+".mp3"};r.prons.push({phsym:Object(a.f)(e,".word-announace"),url:s.us}),t.basic&&(r.basic=Object(a.c)(u,e,".definition-cn"));r.wordId=n&&n.getAttribute("data-id"),t.sentence&&r.wordId&&(r.sentences=await(i=r.wordId,o.a.get("https://www.shanbay.com/api/v1/bdc/example/?vocabulary_id=".concat(i,"&type=sys")).then(e=>{let{data:{data:t}}=e;return Array.isArray(t)?t.map(e=>({annotation:c.a.sanitize(e.annotation),translation:c.a.sanitize(e.translation)})):[]})));var i;if(r.title)return{result:r,audio:s};return Object(a.h)()}(e,t);return Object(a.h)()})(e,s))}},1204:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return i}));var r=n(4),a=n(884);let s;const o=(e,t,n)=>{const r="default"===n.dicts.all.sogou.options.tl?"zh-CN"===t.langCode?"zh-CHS":"zh-TW"===t.langCode?"zh-CHT":"en":n.dicts.all.sogou.options.tl;return"https://fanyi.sogou.com/#auto/".concat(r,"/").concat(e)},i=async(t,n,o,i)=>{const c=o.dicts.all.sogou.options,l=(()=>s=s||new a.Sogou({env:"ext",config:e.env.SOGOU_PID&&e.env.SOGOU_KEY?{pid:e.env.SOGOU_PID,key:e.env.SOGOU_KEY}:void 0}))(),u=i.sl||await l.detect(t),h=i.tl||Object(r.d)(u,o.dicts.all.sogou,n);i.isPDF&&!c.pdfNewline&&(t=t.replace(/\n+/g," "));try{const e=await l.translate(t,u,h);return{result:{id:"sogou",sl:e.from,tl:e.to,langcodes:l.getSupportLanguages(),searchText:e.origin,trans:e.trans},audio:{us:e.trans.tts}}}catch(e){return{result:{id:"sogou",sl:u,tl:h,langcodes:l.getSupportLanguages(),searchText:{paragraphs:[""]},trans:{paragraphs:[""]}}}}}}.call(this,n(59))},1215:function(e){e.exports=JSON.parse('{"seccode":"8511813095152"}')},1216:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return i}));var r=n(4),a=n(885);let s;const o=(e,t,n)=>{const r="default"===n.dicts.all.tencent.options.tl?"zh-CN"===t.langCode?"zh-CHS":"zh-TW"===t.langCode?"zh-CHT":"en":n.dicts.all.tencent.options.tl;return"https://fanyi.qq.com/#auto/".concat(r,"/").concat(e)},i=async(t,n,o,i)=>{const c=o.dicts.all.tencent.options,l=(()=>s=s||new a.Tencent({env:"ext",config:e.env.TENCENT_SECRETID&&e.env.TENCENT_SECRETKEY?{secretId:e.env.TENCENT_SECRETID,secretKey:e.env.TENCENT_SECRETKEY}:void 0}))(),u=i.sl||await l.detect(t),h=i.tl||Object(r.d)(u,o.dicts.all.tencent,n);i.isPDF&&!c.pdfNewline&&(t=t.replace(/\n+/g," "));try{const e=await l.translate(t,u,h);return{result:{id:"tencent",sl:e.from,tl:e.to,langcodes:l.getSupportLanguages(),searchText:e.origin,trans:e.trans},audio:{us:e.trans.tts}}}catch(e){return{result:{id:"tencent",sl:u,tl:h,langcodes:l.getSupportLanguages(),searchText:{paragraphs:[""]},trans:{paragraphs:[""]}}}}}}.call(this,n(59))},1217:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return s})),n.d(t,"search",(function(){return i}));var r=n(40),a=n(4);const s=e=>"http://www.urbandictionary.com/define.php?term=".concat(e),o="https://www.urbandictionary.com",i=(e,t,n,s)=>{const i=n.dicts.all.urban.options;return Object(r.a)("http://www.urbandictionary.com/define.php?term="+encodeURIComponent(e.replace(/\s+/g," "))).catch(a.g).then(e=>(function(e,t){let{resultnum:n}=t,r=[],s={},i=Array.from(e.querySelectorAll(".def-panel"));if(i.length<=0)return Object(a.h)();for(let e=0;e<i.length&&r.length<n;e++){const t=i[e];let n={title:""};if(n.title=Object(a.f)(t,".word"),!n.title)continue;let c=t.querySelector(".play-sound");if(c&&c.dataset.urls)try{const e=JSON.parse(c.dataset.urls)[0];e&&(n.pron=e,s.us=e)}catch(e){}if(n.meaning=Object(a.c)(o,t,".meaning"),/There aren't any definitions for/i.test(n.meaning||""))continue;n.example=Object(a.c)(o,t,".example");let l=t.querySelector(".gif > img");if(l){const e=l.nextElementSibling;n.gif={src:l.src,attr:Object(a.f)(e)}}let u=Array.from(t.querySelectorAll(".tags a"));u&&u.length>0&&(n.tags=u.map(e=>(e.textContent||" ").slice(1))),n.contributor=Object(a.f)(t,".contributor"),n.thumbsUp=Object(a.f)(t,".thumbs .up .count"),n.thumbsDown=Object(a.f)(t,".thumbs .down .count"),r.push(n)}return r.length>0?{result:r,audio:s}:Object(a.h)()})(e,i))}},1218:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return s})),n.d(t,"search",(function(){return o}));var r=n(40),a=n(4);const s=e=>"https://www.vocabulary.com/dictionary/".concat(e),o=(e,t,n,s)=>Object(r.a)("https://www.vocabulary.com/dictionary/"+encodeURIComponent(e.replace(/\s+/g," "))).catch(a.g).then(i);function i(e){const t=Object(a.f)(e,".short");if(!t)return Object(a.h)();const n=Object(a.f)(e,".long");return n?{result:{long:n,short:t}}:Object(a.h)()}},1219:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getSrcPage",(function(){return s})),n.d(t,"search",(function(){return i}));var r=n(40),a=n(4);const s=e=>"https://www.weblio.jp/content/".concat(e),o="https://www.weblio.jp",i=(e,t,n,s)=>Object(r.a)("https://www.weblio.jp/content/"+encodeURIComponent(e.replace(/\s+/g," "))).catch(a.g).then(c);function c(t){const n=[],r=t.querySelectorAll("#cont>.pbarT .pbarTL>a");return t.querySelectorAll("#cont>.kijiWrp>.kiji").forEach((t,s)=>{const i=r[s];i?"百科事典"!==i.title&&n.push({title:Object(a.e)(o,i,{config:{}}),def:Object(a.c)(o,t,{config:{}})}):e.env.DEV_BUILD&&console.error("Dict Weblio: missing title")}),n.length>0?{result:n}:Object(a.h)()}}.call(this,n(59))},1220:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return c}));var r=n(40),a=n(4),s=n(37);const o=e=>"https://ejje.weblio.jp/content/".concat(encodeURIComponent(e.replace(/\s+/g,"+"))),i="https://ejje.weblio.jp",c=(e,t,n,s)=>Object(r.a)(o(e,t,n)).catch(a.g).then(l);function l(e){const t=[];return e.querySelectorAll(".mainBlock").forEach(e=>{if("summary"===e.id){let n="";const r=e.querySelector(".summaryTbl");if(r){n+=Object(a.e)(i,r,".summaryL h1");const e=r.querySelector(".summaryC audio source");e&&(n+=Object(s.e)(e.getAttribute("src"))),r.outerHTML='<div class="summaryHead">'.concat(n,"</div>")}return Object(a.j)(e,"#leadBtnWrp"),Object(a.j)(e,".addLmFdWr"),Object(a.j)(e,".flex-rectangle-ads-frame"),Object(a.j)(e,".outsideLlTable"),void t.push({content:Object(a.e)(i,e)})}if(!e.className.includes("hlt_")||e.classList.contains("hlt_CPRHT")||e.classList.contains("hlt_RLTED"))return;let n="",r=e.querySelector(".wrp");if(r){if((n=Object(a.f)(r,".dictNm")).includes("Wiktionary"))return;r.remove()}else(r=e.querySelector(".qotH"))&&(n=Object(a.f)(r,".qotHT"),r.remove());Object(a.j)(e,".hideDictWrp"),Object(a.j)(e,".kijiFoot"),Object(a.j)(e,".addToSlBtnCntner"),e.querySelectorAll(".fa-volume-up").forEach(e=>{const t=e.querySelector("source");t&&e.replaceWith(Object(s.d)(t.getAttribute("src")))}),e.querySelectorAll("br").forEach(e=>{e.classList.add("br"),e.outerHTML='<div class="'.concat(e.className,'"></div>')}),e.querySelectorAll("a").forEach(e=>{e.classList.contains("crosslink")||Object(a.a)(e)}),t.push({title:n,content:Object(a.e)(i,e)})}),t.length>0?{result:t}:Object(a.h)()}},1221:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return s})),n.d(t,"search",(function(){return i}));var r=n(40),a=n(4);const s=e=>"http://www.learnersdictionary.com/definition/".concat(e.trim().split(/\s+/).join("-")),o="http://www.learnersdictionary.com",i=(e,t,n,s)=>{const i=n.dicts.all.websterlearner.options;return Object(r.a)("http://www.learnersdictionary.com/definition/"+e.toLocaleLowerCase().replace(/[^A-Za-z0-9]+/g,"-")).catch(a.g).then(e=>(function(e,t){const n=e.querySelector('[id^="spelling"] .links');if(!n)return function(e,t){e.querySelectorAll(".d_hidden").forEach(e=>e.remove());const n={type:"lex",items:[]},r={};if(e.querySelectorAll(".entry").forEach(e=>{const s={title:""},i=e.querySelector(".hw_d");if(!i)return;const c=i.querySelector(".play_pron");if(c){const e=(c.dataset.lang||"").replace("_","/"),t=c.dataset.dir||"",n=c.dataset.file||"";s.pron="http://media.merriam-webster.com/audio/prons/".concat(e,"/mp3/").concat(t,"/").concat(n,".mp3"),r.us=s.pron,c.remove()}s.title=Object(a.c)(o,i);const l=e.querySelector(".hw_infs_d");if(l){const e=l.querySelector(".play_pron");if(e){const t=(e.dataset.lang||"").replace("_","/"),n=e.dataset.dir||"",r=e.dataset.file||"";s.infsPron="http://media.merriam-webster.com/audio/prons/".concat(t,"/mp3/").concat(n,"/").concat(r,".mp3"),e.remove()}s.infs=Object(a.c)(o,l)}s.labels=Object(a.c)(o,e,".labels"),t.defs&&(s.senses=Object(a.c)(o,e,".sblocks")),t.phrase&&(s.phrases=Object(a.c)(o,e,".dros")),t.derived&&(s.derived=Object(a.c)(o,e,".uros")),t.arts&&(s.arts=Array.from(e.querySelectorAll(".arts img")).map(e=>e.src)),(s.senses||s.phrases||s.derived||s.arts&&s.arts.length>0)&&n.items.push(s)}),n.items.length>0)return{result:n,audio:r};return Object(a.h)()}(e,t);if(t.related)return{result:{type:"related",list:Object(a.c)(o,n)}};return Object(a.h)()})(e,i))}},1222:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return i})),n.d(t,"fetchLangList",(function(){return c}));var r=n(40),a=n(28),s=n(4);const o=(e,t,n)=>{const{lang:r}=n.dicts.all.wikipedia.options,a=l(e,r),s=r.startsWith("zh-")?r:"wiki";return"https://".concat(a,".wikipedia.org/").concat(s,"/").concat(encodeURIComponent(e))},i=(e,t,n,a)=>{const{lang:o}=n.dicts.all.wikipedia.options;let i=l(e,o),c=a.url;if(c){const e=c.match(/([^\/\.]+)\.m\.wikipedia\.org/);e?i=e[1]:c=c.replace(/^\//,"https://".concat(i,".m.wikipedia.org/"))}else{const t=o.startsWith("zh-")?o:"wiki";c="https://".concat(i,".m.wikipedia.org/").concat(t,"/").concat(encodeURIComponent(e))}return Object(r.a)(c).catch(s.g).then(e=>(function(e,t){if([...e.querySelectorAll("#mf-section-0 b")].some(e=>{const t=e.textContent;return"The article that you're looking for doesn't exist."===t||"维基百科目前还没有与上述标题相同的条目。"===t}))return Object(s.h)();const n=Object(s.f)(e,"#section_0");if(!n)return Object(s.h)();e.querySelectorAll("#bodyContent .section-heading").forEach(e=>{e.classList.add("collapsible-heading");const t=e.querySelector(".mw-ui-icon");t&&(t.classList.add("mw-ui-icon-mf-arrow"),t.classList.remove("mf-mw-ui-icon-rotate-flip"))});const r=Object(s.e)("https://".concat(t,".wikipedia.org/"),e,{selector:"#bodyContent",config:{}});if(!r)return Object(s.h)();let a="",o=e.querySelector("a.language-selector");o||(o=e.querySelector(".language-selector a"));o&&(a=Object(s.b)("https://".concat(t,".m.wikipedia.org/"),o,"href"));return{result:{title:n,content:r,langSelector:a}}})(e,i))};function c(e){return Object(r.a)(e).then(u).catch(e=>(console.error("dict wikipedia: fetch langlist failed",e),[]))}function l(e,t){return t.startsWith("zh-")?"zh":"auto"===t?Object(a.g)(e)?"ja":Object(a.c)(e)?"zh":"en":t}function u(e){return[...e.querySelectorAll("#mw-content-text li a")].map(e=>{const t=e.getAttribute("href"),n=e.getAttribute("title");if(t&&n)return{url:t,title:n}}).filter(e=>!!e)}},1223:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return s})),n.d(t,"search",(function(){return i}));var r=n(40),a=n(4);const s=e=>"https://dict.youdao.com/w/eng/".concat(e),o="http://www.youdao.com",i=(e,t,n,s)=>{const i=n.dicts.all.youdao.options,c="zh-TW"===t.langCode;return Object(r.a)("https://dict.youdao.com/w/"+encodeURIComponent(e.replace(/\s+/g," "))).catch(a.g).then(e=>(function(e,t,n){const r=e.querySelector(".error-typo");if(!r)return function(e,t,n){const r={type:"lex",title:Object(a.f)(e,".keyword",n),stars:0,rank:Object(a.f)(e,".rank"),pattern:Object(a.f)(e,".pattern",n),prons:[]},s={},i=e.querySelector(".star");i&&(r.stars=Number((i.className.match(/\d+/)||[0])[0]));e.querySelectorAll(".baav .pronounce").forEach(e=>{const t=e.textContent||"",n=e.querySelector(".dictvoice");if(n&&n.dataset.rel){const e="https://dict.youdao.com/dictvoice?audio="+n.dataset.rel;r.prons.push({phsym:t,url:e}),t.includes("英")?s.uk=e:t.includes("美")&&(s.us=e)}}),t.basic&&(r.basic=Object(a.c)(o,e,{selector:"#phrsListTab .trans-container",toChz:n}));t.collins&&(r.collins=Object(a.c)(o,e,{selector:"#collinsResult .ol",toChz:n}));t.discrimination&&(r.discrimination=Object(a.c)(o,e,{selector:"#discriminate",toChz:n}));t.sentence&&(r.sentence=Object(a.c)(o,e,{selector:"#authority .ol",toChz:n}));t.translation&&(r.translation=Object(a.c)(o,e,{selector:"#fanyiToggle .trans-container",toChz:n}));if(r.title||r.translation)return{result:r,audio:s};return Object(a.h)()}(e,t,n);if(t.related)return{result:{type:"related",list:Object(a.c)(o,r,{toChz:n})}};return Object(a.h)()})(e,i,c))}},1224:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return i}));var r=n(4),a=n(886);let s;const o=(e,t,n)=>"http://fanyi.youdao.com",i=async(t,n,o,i)=>{const c=o.dicts.all.youdaotrans.options,l=(()=>s=s||new a.Youdao({env:"ext",config:e.env.YOUDAO_APPKEY&&e.env.YOUDAO_KEY?{appKey:e.env.YOUDAO_APPKEY,key:e.env.YOUDAO_KEY}:void 0}))(),u=i.sl||await l.detect(t),h=i.tl||Object(r.d)(u,o.dicts.all.youdaotrans,n);i.isPDF&&!c.pdfNewline&&(t=t.replace(/\n+/g," "));try{const e=await l.translate(t,u,h);return{result:{id:"youdaotrans",sl:e.from,tl:e.to,langcodes:l.getSupportLanguages(),searchText:e.origin,trans:e.trans},audio:{us:e.trans.tts}}}catch(e){return{result:{id:"youdaotrans",sl:u,tl:h,langcodes:l.getSupportLanguages(),searchText:{paragraphs:[""]},trans:{paragraphs:[""]}}}}}}.call(this,n(59))},1225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(158).__importDefault(n(782)),a="fanyideskweb",s="undefined"==typeof window?"5.0 (Macintosh; Intel Mac OS X 10_14_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36":window.navigator.appVersion,o=r.default(s);t.default=function(e,t){const n=Date.now()+"",s=n+parseInt(10*Math.random()+"",10);return{client:a,ts:n,bv:o,salt:s,sign:r.default(a+e+s+t)}}},1226:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return o})),n.d(t,"search",(function(){return l}));var r=n(40),a=n(4),s=n(37);const o=e=>"https://www.zdic.net/hans/".concat(e),i="https://www.zdic.net";let c=!1;const l=(e,t,n,o)=>{const l=n.dicts.all.zdic.options.audio;return!c&&l&&(c=!0,function(){const e=["blocking","requestHeaders"];browser.webRequest.OnBeforeSendHeadersOptions&&browser.webRequest.OnBeforeSendHeadersOptions.hasOwnProperty("EXTRA_HEADERS")&&e.push("extraHeaders");browser.webRequest.onBeforeSendHeaders.addListener(e=>{if(e&&e.requestHeaders){for(var t=0;t<e.requestHeaders.length;++t)if("Referer"===e.requestHeaders[t].name){e.requestHeaders[t].value="https://www.zdic.net";break}t===e.requestHeaders.length&&e.requestHeaders.push({name:"Referer",value:"https://www.zdic.net"})}return{requestHeaders:e.requestHeaders}},{urls:["https://img.zdic.net/audio/*"]},e)}()),Object(r.a)("https://www.zdic.net/hans/"+encodeURIComponent(e.replace(/\s+/g," "))).catch(a.g).then(e=>(function(e,t){const n={result:[]};for(const r of e.querySelectorAll("[data-type-block]")){const e=r.dataset.typeBlock||"";if(/基本解释|词语解释|详细解释/.test(e)){for(const e of r.querySelectorAll("[data-src-mp3]"))t?(n.audio||(n.audio={py:e.dataset.srcMp3}),e.replaceWith(Object(s.d)(e.dataset.srcMp3))):e.remove();n.result.push({title:e,content:Object(a.c)(i,r,".content")})}}return n.result.length>0?n:Object(a.h)()})(e,l))}},127:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"Service",(function(){return o}));var r=n(276),a=n(81),s=n(3);class o extends r.a{constructor(){super(...arguments),this.config=o.getDefaultConfig(),this.meta={}}static getDefaultConfig(){return{url:"",user:"",passwd:"",duration:15}}async startInterval(){this.meta=await Object(a.b)(o.id)||this.meta,browser.alarms.onAlarm.addListener(this.handleSyncAlarm.bind(this)),Object(a.a)(o.id).subscribe(this.handleInterval.bind(this))}async handleInterval(e){if(await browser.alarms.clear("webdav"),e)if("string"!=typeof e.url||e.url.endsWith("/")||(e.url+="/"),this.config=e,e.url){const t=+e.duration||15,n=Date.now();let r=+(await s.c.local.get("webdavInterval")).webdavInterval;(!r||r<n||n+6e4*t<r)&&(r=n+1e3),await s.c.local.set({webdavInterval:r}),browser.alarms.create("webdav",{when:r,periodInMinutes:t})}else await s.c.local.set({webdavInterval:0});else this.config=o.getDefaultConfig()}async handleSyncAlarm(t){if("webdav"!==t.name)return;e.env.DEV_BUILD&&console.log("WebDAV Alarm Interval"),await this.download({}).catch(()=>{});const n=6e4*this.config.duration||9e5;await s.c.local.set({webdavInterval:Date.now()+n})}async init(e){try{const n=await fetch(e.url,{method:"PROPFIND",headers:{Authorization:"Basic "+window.btoa("".concat(e.user,":").concat(e.passwd)),"Content-Type":'application/xml; charset="utf-8"',Depth:"1"}});if(!n.ok){if(401===n.status)return Promise.reject("unauthorized");throw new Error}var t=await n.text()}catch(e){return Promise.reject("network")}try{if(!t)throw new Error;var n=(new DOMParser).parseFromString(t,"text/xml");if(!n)throw new Error}catch(e){return Promise.reject("parse")}let r=!1;const a=Array.from(n.querySelectorAll("response"));for(let e in a){const t=a[e].querySelector("href");if(t&&t.textContent&&t.textContent.endsWith("/Saladict/")){if(a[e].querySelector("resourcetype collection")){r=!0;break}return Promise.reject("dir")}}if(!r){if(!(await fetch(e.url+"Saladict",{method:"MKCOL",headers:{Authorization:"Basic "+window.btoa("".concat(e.user,":").concat(e.passwd))}})).ok)return Promise.reject("mkcol")}if(await this.setConfig(e),await this.setMeta({}),r)try{return await this.download({testConfig:e,noCache:!0}),Promise.reject("exist")}catch(e){}}async add(t){let{force:n}=t;if(!this.config.url)return void(e.env.DEV_BUILD&&console.warn("sync service ".concat(o.id," upload: empty url")));n||await this.download({});const r=await Object(a.c)();if(!r||r.length<=0)return;const s=Date.now();try{var i=JSON.stringify({timestamp:s,words:r})}catch(t){return e.env.DEV_BUILD&&console.error("WebDAV: Stringify notebook failed",r),Promise.reject("parse")}try{if(!(await fetch(this.config.url+"Saladict/notebook.json",{method:"PUT",headers:{Authorization:"Basic "+window.btoa("".concat(this.config.user,":").concat(this.config.passwd))},body:i})).ok)throw new Error}catch(t){return e.env.DEV_BUILD&&console.error("WebDAV: upload failed",t),Promise.reject("network")}await this.setMeta({timestamp:s,etag:""})}delete(e){let{force:t}=e;return this.add({force:t})}async download(t){let{testConfig:n,noCache:r}=t;const s=n||this.config;if(!s.url)return void(e.env.DEV_BUILD&&console.warn("sync service ".concat(o.id," download: empty url")));const i={Authorization:"Basic "+window.btoa("".concat(s.user,":").concat(s.passwd))};n||r||null==this.meta.etag||(i["If-None-Match"]=this.meta.etag,i["If-Modified-Since"]=this.meta.etag);try{var c=await fetch(s.url+(s.url.endsWith("/")?"":"/")+"Saladict/notebook.json",{method:"GET",headers:i});if(304===c.status)return;if(!c.ok)throw new Error}catch(e){return Promise.reject("network")}try{var l=await c.json()}catch(e){return console.error("Fetch webdav notebook.json error",c),Promise.reject("parse")}if(!Array.isArray(l.words)||l.words.some(e=>!e.date))return console.error("Parse webdav notebook.json error: incorrect words",l),Promise.reject("format");if(!r&&this.meta.timestamp){if(!l.timestamp)return console.error("webdav notebook.json no timestamp",l),Promise.reject("timestamp");if(n||l.timestamp!==this.meta.timestamp||this.meta.etag||await this.setMeta({timestamp:l.timestamp,etag:c.headers.get("ETag")||""}),l.timestamp<=this.meta.timestamp)return}e.env.DEV_BUILD&&(c.headers.get("ETag")||console.warn("webdav notebook.json no etag",c)),n||(await this.setMeta({timestamp:l.timestamp,etag:c.headers.get("ETag")||""}),await Object(a.g)(l.words))}setMeta(e){return this.meta=e,Object(a.f)(o.id,e)}async getMeta(){const e=await Object(a.b)(o.id);this.meta=e||{}}setConfig(e){return this.config=e,Object(a.h)(o.id,e)}async getConfig(){return this.config=await Object(a.d)(o.id)||this.config,this.config}}o.id="webdav",o.title={en:"WebDAV","zh-CN":"WebDAV","zh-TW":"WebDAV"}}.call(this,n(59))},1289:function(e,t,n){"use strict";n.r(t);n(1145);var r=n(31),a=n(56),s=n(173),o=n(3),i=n(161),c=n(613),l=n(585),u=n(615),h=n(67),d=n(104),p=n(60);const f=new h.a;function g(e,t){browser.browserAction.setIcon({tabId:t,path:e?{16:"assets/icon-gray-16.png",19:"assets/icon-gray-19.png",24:"assets/icon-gray-24.png",38:"assets/icon-gray-38.png",48:"assets/icon-gray-48.png",128:"assets/icon-gray-128.png"}:{16:"assets/icon-16.png",19:"assets/icon-19.png",24:"assets/icon-24.png",38:"assets/icon-38.png",48:"assets/icon-48.png",128:"assets/icon-128.png"}})}f.pipe(Object(d.d)("tabId",async e=>e.options?e:(e.delay&&await Object(p.d)(1e3),{tabId:e.tabId,options:await o.a.send(e.tabId,{type:"GET_TAB_BADGE_INFO"}).catch(()=>{})||{active:window.appConfig.active,tempDisable:!1,unsupported:!0}}))).subscribe(e=>{let{tabId:t,options:r}=e;return r.active?r.tempDisable?function(e){g(!1,e),browser.browserAction.setBadgeBackgroundColor({color:"#F39C12",tabId:e}),browser.browserAction.setBadgeText({text:"off",tabId:e}),browser.browserAction.setTitle({title:n(788)("./"+window.appConfig.langCode+"/background").locale.app.tempOff,tabId:e})}(t):r.unsupported?function(e){g(!0,e),browser.browserAction.setTitle({title:n(788)("./"+window.appConfig.langCode+"/background").locale.app.unsupported,tabId:e})}(t):function(e){g(!1,e),browser.browserAction.setBadgeText({text:"",tabId:e}),browser.browserAction.setTitle({title:"",tabId:e})}(t):function(e){g(!1,e),browser.browserAction.setBadgeBackgroundColor({color:"#C0392B",tabId:e}),browser.browserAction.setBadgeText({text:"off",tabId:e}),browser.browserAction.setTitle({title:n(788)("./"+window.appConfig.langCode+"/background").locale.app.off,tabId:e})}(t)});n(626);o.a.self.initServer(),Object(i.a)(),l.a.init(),u.a.init(),Object(r.c)().then(async e=>{window.appConfig=e,Object(c.b)(e),Object(s.a)("/background"),o.a.addListener("SEND_TAB_BADGE_INFO",(e,t)=>{let{payload:n}=e;t.tab&&t.tab.id&&f.next({tabId:t.tab.id,options:n})}),browser.tabs.onUpdated.addListener(async(e,t)=>{"complete"===t.status&&f.next({tabId:e,delay:!0})}),Object(r.a)(e=>{let{newConfig:t}=e;window.appConfig=t})}),Object(a.e)().then(async e=>{window.activeProfile=e,Object(a.a)(e=>{let{newProfile:t}=e;window.activeProfile=t})})},131:function(e,t,n){"use strict";n.r(t),n.d(t,"Service",(function(){return c}));var r=n(276),a=n(81),s=n(3),o=n(60);const i={open:{en:"Open","zh-CN":"打开","zh-TW":"開啟"},loginCheckFailed:{en:"Shanbay login failed. Click to open shanbay.com.","zh-CN":"扇贝登录已失效，请点击打开官网重新登录。","zh-TW":"扇貝登入已失效，請點選開啟官網重新登入。"},errNetwork:{en:"Unable to access shanbay.com. Please check your network connection.","zh-CN":"无法访问扇贝生词本，请检查网络。","zh-TW":"無法訪問扇貝生字本，請檢查網路。"},errWord:{en:"Unable to add to Shanbay notebook. This word is not in Shanbay's vocabulary database.","zh-CN":"无法添加到扇贝生词本，扇贝单词库没有收录此单词。","zh-TW":"無法新增到扇貝生字本，扇貝單字庫沒有收錄此單字。"},errLearning:{en:"Unable to add to Shanbay notebook.","zh-CN":"无法添加到扇贝生词本。","zh-TW":"無法新增到扇貝生字本。"}};class c extends r.a{constructor(){super(...arguments),this.config=c.getDefaultConfig()}static getDefaultConfig(){return{enable:!1}}static openLogin(){return Object(s.b)("https://www.shanbay.com/web/account/login")}async startInterval(){const e=await Object(a.d)(c.id);e&&(this.config=e),browser.notifications.onClicked.addListener(this.handleLoginNotification),browser.notifications.onButtonClicked&&browser.notifications.onButtonClicked.addListener(this.handleLoginNotification)}async init(){if(!await this.isLogin())return Promise.reject("login");this.config.enable=!0,await Object(a.h)(c.id,this.config)}async add(e){let{words:t,force:n}=e;if(this.config.enable)if(await this.isLogin()){if(n&&(t=await Object(a.c)()),t&&!(t.length<=0))for(let e=0;e<t.length;e++){try{await this.addWord(t[e].text)}catch(e){break}(e+1)%50==0?await Object(o.d)(9e5):await Object(o.d)(500)}}else this.notifyLogin()}async addWord(e){try{const n="http://www.shanbay.com/api/v1/bdc/search/?word="+encodeURIComponent(e);var t=await fetch(n).then(e=>e.json())}catch(t){return this.notifyError("errNetwork",e),Promise.reject("network")}if(!t||!t.data)return this.notifyError("errWord",e),Promise.reject("word");try{var n=await fetch("http://www.shanbay.com/api/v1/bdc/learning/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"content_type=vocabulary&id=".concat(t.data.id)}).then(e=>e.json())}catch(t){return this.notifyError("errNetwork",e),Promise.reject("network")}return n&&0===n.status_code?void 0:(this.notifyError("errLearning",e),Promise.reject("learning"))}async isLogin(){return Boolean(await browser.cookies.get({url:"http://www.shanbay.com",name:"auth_token"}))}handleLoginNotification(e){"shanbay-login"===e&&c.openLogin()}notifyError(e,t){const{langCode:n}=window.appConfig;browser.notifications.create({type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:"Saladict Sync Service ".concat(c.title[n]),message:"「".concat(t,"」").concat(i[e][n]),eventTime:Date.now()+1e4,priority:2})}notifyLogin(){const{langCode:e}=window.appConfig,t={type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:"Saladict Sync Service ".concat(c.title[e]),message:i.loginCheckFailed[e],eventTime:Date.now()+1e4,priority:2};navigator.userAgent.includes("Firefox")||(t.buttons=[{title:i.open[e]}]),browser.notifications.create("shanbay-login",t)}}c.id="shanbay",c.title={en:"Shanbay","zh-CN":"扇贝","zh-TW":"扇贝"}},134:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"a",(function(){return h})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return m}));var r=n(611),a=n(3),s=n(28),o=n(161);class i extends r.a{constructor(){super("SaladictWords"),this.notebook=void 0,this.history=void 0,this.syncmeta=void 0,this.version(1).stores({notebook:"date,text,context,url",history:"date,text,context,url",syncmeta:"id"}),this.notebook=this.table("notebook"),this.history=this.table("history"),this.syncmeta=this.table("syncmeta")}}const c=new i;function l(t){return c.syncmeta.where("id").equals(t).first(e=>e&&e.json).catch(t=>{e.env.DEV_BUILD&&console.error(t)})}function u(e,t){return c.syncmeta.put({id:e,json:t})}function h(t){return c.syncmeta.delete(t).catch(t=>{e.env.DEV_BUILD&&console.error(t)})}function d(e){return c.notebook.where("text").equalsIgnoreCase(e.text).count().then(e=>e>0)}function p(e){let{area:t,word:n}=e;return"notebook"===t&&Object(o.d)({op:"ADD",words:[n]}).catch(()=>{}),c[t].put(n)}function f(t){let{area:n,words:r}=t;return e.env.DEV_BUILD&&r.length!==new Set(r.map(e=>e.date)).size&&console.error("save Words: duplicate records"),"notebook"===n&&Object(o.d)({op:"ADD",words:r}).catch(()=>{}),c[n].bulkPut(r)}function g(e){let{area:t,dates:n}=e;return"notebook"===t&&Object(o.d)({op:"DELETE",dates:n}).catch(()=>{}),Array.isArray(n)?c[t].bulkDelete(n):c[t].clear()}function w(e){let{area:t,text:n}=e;return c[t].where("text").equalsIgnoreCase(n).toArray()}async function m(e){let{area:t,itemsPerPage:n,pageNum:r,filters:a={},sortField:o="date",sortOrder:i="descend",searchText:l}=e;const u=c[t].orderBy(o);"descend"===i&&u.reverse();const h=Array.isArray(a.text)&&a.text.length>0;if(h||l){const e=h?a.text.reduce((e,t)=>(e[t]=!0,e),{}):{},t=l?l.toLocaleLowerCase():"";u.filter(n=>{const r=!h||(e.en&&Object(s.e)(n.text)||e.ch&&Object(s.c)(n.text)||e.word&&!/\s/.test(n.text)||e.phra&&/\s/.test(n.text)),a=!l||Object.values(n).some(e=>"string"==typeof e&&-1!==e.toLocaleLowerCase().indexOf(t));return r&&a})}const d=await u.count();return void 0!==n&&void 0!==r&&u.offset(n*(r-1)).limit(n),{total:d,words:await u.toArray()}}c.on("ready",()=>c.notebook.count(async e=>{if(e>0)return;const{notebookCat:t}=await a.c.local.get("notebookCat");if(!t||!Array.isArray(t.data))return;const n=t.data,r=await a.c.local.get(n),s=[];return n.forEach(e=>{const t=r[e];t&&Array.isArray(t.data)&&t.data.forEach(e=>{const{date:t,data:n}=e,r=new Date("".concat(t.slice(0,2),"/").concat(t.slice(2,4),"/").concat(t.slice(4))).getTime(),a=n.map((e,t)=>({date:r+t,text:e.text||"",context:e.context||"",title:e.title||"",favicon:e.favicon?e.favicon.startsWith("chrome")?"https://saladict.crimx.com/favicon.ico":e.favicon:"",url:e.url||"",trans:e.trans||"",note:e.note||""}));s.push(...a)})}),browser.storage.local.clear(),c.transaction("rw",c.notebook,()=>c.notebook.bulkAdd(s))})),c.open()}).call(this,n(59))},161:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(60);const a=n(762);let s=new Map;function o(){(s=a.keys().reduce((e,t)=>{const n=a(t).Service;return e.set(n.id,new n)},s)).forEach(e=>e.startInterval())}async function i(t){let{serviceID:n,config:r}=t;const a=s.get(n);return a?a.init(r).catch(u):(e.env.DEV_BUILD&&console.error("Sync service init error: wrong service id ".concat(n)),u("wrong service id"))}async function c(e){let t=[];if(e.serviceID){const n=s.get(e.serviceID);if(!n)return void console.error("Sync service upload error: wrong service id ".concat(e.serviceID));t.push(n)}return t.length<=0&&t.push(...s.values()),Promise.all(t.map(async t=>{try{"ADD"===e.op?await t.add({words:e.words,force:e.force}):"DELETE"===e.op&&await t.delete({dates:e.dates,force:e.force})}catch(e){const n=t.constructor.title[window.appConfig.langCode],r="string"==typeof e?e:"unknown";browser.notifications.create({type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:"Saladict Sync Service ".concat(n),message:"Error '".concat(r,"' occurs during sync service ").concat(n," uploading."),eventTime:Date.now()+2e4,priority:2})}}))}async function l(t){if(t){const n=s.get(t.serviceID);return n?n.download({noCache:t.noCache}).catch(u):(e.env.DEV_BUILD&&console.error("Sync service download error: wrong service id ".concat(t.serviceID)),u("wrong service id"))}return Object(r.b)([...s.values()].map(e=>e.download({})))}function u(e){return{error:"string"==typeof e?e:"unknown"}}}).call(this,n(59))},173:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(193),a=n.n(r);function s(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(e.env.DEV_BUILD||n.ga)return;const r=new a.a,s=r.getBrowser(),o=r.getOS();n.ga=n.ga||function(){(n.ga.q=n.ga.q||[]).push(arguments)},n.ga.l=Date.now(),n.ga("create","UA-49163616-4","auto"),n.ga("set","checkProtocolTask",null),n.ga("set","transport","beacon"),n.ga("set","dimension1",s.name||"None"),n.ga("set","dimension2",(s.version||"0.0").split(".").slice(0,3).join(".")),n.ga("set","dimension3",o.name||"None"),n.ga("set","dimension4",o.version||"0.0"),n.ga("send","pageview",t);const i=n.document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://www.google-analytics.com/analytics.js",n.document.body.appendChild(i)}}).call(this,n(59))},276:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(){this.config=void 0,this.meta=void 0}static getDefaultConfig(){return{}}static getDefaultMeta(){return{}}async delete(e){}async download(e){}startInterval(){}}r.id=void 0,r.title=void 0},4:function(e,t,n){"use strict";n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return w})),n.d(t,"d",(function(){return m})),n.d(t,"f",(function(){return b})),n.d(t,"c",(function(){return O})),n.d(t,"e",(function(){return C})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return _})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return k})),n.d(t,"k",(function(){return T}));var r=n(174),a=n.n(r),s=n(176),o=n(0),i=n(94),c=n(95),l=n(11),u=n(292),h=n(609);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return Promise.reject(new Error("NO_RESULT"))}function w(){return Promise.reject(new Error("NETWORK_ERROR"))}function m(e,t,n){let{options:r,options_sel:a}=t,s="";return(s="default"===r.tl?a.tl.includes(n.langCode)?n.langCode:a.tl.find(e=>"default"!==e)||"":r.tl)&&e!==s?s:s.startsWith("en")?n.langCode.startsWith("zh")?n.langCode:"zh-CN":"en"}function b(e){if(!e)return"";let t="",n=!1;for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];for(let e=a.length-1;e>=0;e--)"string"==typeof a[e]?t=a[e]:"boolean"==typeof a[e]&&(n=a[e]);const i=t?e.querySelector(t):e;if(!i)return"";const c=i.textContent||"";return n?Object(s.a)(c):c}const y={FORBID_TAGS:["style"],FORBID_ATTR:["style"]};function j(e){let{mode:t="innerHTML",selector:n,toChz:r,host:o,config:i=y}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=n?e.querySelector(n):e;if(!c)return"";if(o){const e=e=>{e.setAttribute("href",k(o,e,"href")),e.setAttribute("src",k(o,e,"src"))};"A"!==c.tagName&&"IMG"!==c.tagName||e(c),c.querySelectorAll("a").forEach(e),c.querySelectorAll("img").forEach(e)}const l=a.a.sanitize(c,p({},i,{RETURN_DOM_FRAGMENT:!0})),u=l.firstChild?l.firstChild[t]:"";return r?Object(s.a)(u):u}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j(t,"string"==typeof n?{selector:n,host:e,mode:"innerHTML"}:p({},n,{host:e,mode:"innerHTML"}))}function C(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j(t,"string"==typeof n?{selector:n,host:e,mode:"outerHTML"}:p({},n,{host:e,mode:"outerHTML"}))}function S(e,t){const n=e.querySelector(t);n&&n.remove()}function _(e,t){e.querySelectorAll(t).forEach(e=>e.remove())}function v(e){e.setAttribute("target","_blank"),e.setAttribute("rel","nofollow noopener noreferrer")}function k(e,t,n){e.endsWith("/")&&(e=e.slice(0,-1));const r=e.startsWith("https")?"https:":"http:",a=t.getAttribute(n);return a?/^[a-zA-Z0-9]+:/.test(a)?a:a.startsWith("//")?r+a:/^.?\/+/.test(a)?e+"/"+a.replace(/^.?\/+/,""):e+"/"+a:""}const T=()=>{const[e,t]=Object(i.a)(z);Object(c.a)(t);const n=Object(o.useRef)(null);return Object(o.useEffect)(()=>{if(n.current){const t=n.current;return t.addEventListener("wheel",e,{passive:!1}),()=>{t.removeEventListener("wheel",e)}}},[n.current]),n};function z(e){return e.pipe(Object(l.a)(e=>(e.stopPropagation(),e.preventDefault(),[e.currentTarget,e.deltaY])),Object(u.a)(80),Object(h.a)(e=>{let[t,n]=e;t.scrollBy({left:n>0?250:-250,behavior:"smooth"})}))}},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));n(174);var r=n(147),a=n.n(r);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a()(e,o({withCredentials:!1},t,{transformResponse:[e=>e],responseType:"document"})).then(e=>{let{data:t}=e;return t})}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a()(e,o({withCredentials:!1},t,{transformResponse:[e=>e],responseType:"text"})).then(e=>{let{data:t}=e;return t})}},585:function(e,t,n){"use strict";var r=n(3),a=n(879),s=n.n(a),o=n(31),i=(n(626),n(49)),c=n(293),l=n(11);class u{static getInstance(){return u.instance||(u.instance=new u)}constructor(){this.i18n=void 0,this.i18n$$=void 0,this.i18n=Object(i.a)(),this.i18n$$=new c.a(this.i18n),this.i18n.on("languageChanged",()=>{this.i18n$$.next(this.i18n)})}getFixedT$$(e){return this.i18n.loadNamespaces(e),this.i18n$$.pipe(Object(l.a)(t=>t.getFixedT(t.language,e)))}}u.instance=void 0;var h=n(619),d=n(90),p=n(23),f=n(1297),g=n(613),w=n(614);n.d(t,"a",(function(){return m}));class m{static getInstance(){return m.instance||(m.instance=new m)}static openGoogle(){browser.tabs.executeScript({file:"/assets/google-page-trans.js"})}static openYoudao(){browser.tabs.executeScript({file:"/assets/fanyi.youdao.2.0/main.js"}).then(e=>{if(!e||1!==e&&1!==e[0])throw new Error}).catch(()=>{browser.notifications.create({type:"basic",eventTime:Date.now()+4e3,iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:"Saladict",message:u.getInstance().i18n.t("menus:notification_youdao_err")})})}static openBaiduPage(){browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{if(e.length>0&&e[0].url){const t="zh-CN"===window.appConfig.langCode?"zh":"zh-TW"===window.appConfig.langCode?"cht":"en";Object(r.b)("https://fanyi.baidu.com/transpage?query=".concat(encodeURIComponent(e[0].url),"&from=auto&to=").concat(t,"&source=url&render=1"))}})}static openSogouPage(){browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{if(e.length>0&&e[0].url){const t="zh-CN"===window.appConfig.langCode?"zh-CHS":"en";Object(r.b)("https://translate.sogoucdn.com/pcvtsnapshot?from=auto&to=".concat(t,"&tfr=translatepc&url=").concat(encodeURIComponent(e[0].url),"&domainType=sogou"))}})}static openMicrosoftPage(){browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{if(e.length>0&&e[0].url){const t="zh-CN"===window.appConfig.langCode?"zh-CHS":"zh-TW"===window.appConfig.langCode?"zh-CHT":"en";Object(r.b)("https://www.microsofttranslator.com/bv.aspx?from=auto&to=".concat(t,"&r=true&a=").concat(encodeURIComponent(e[0].url)))}})}static requestSelection(){browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{e.length>0&&null!=e[0].id&&r.a.send(e[0].id,{type:"EMIT_SELECTION"})})}handleContextMenusClick(e){const t=String(e.menuItemId).replace(/_ba$/,""),n=e.selectionText||"",a=e.linkUrl||"";switch(t){case"google_page_translate":case"google_cn_page_translate":m.openGoogle();break;case"youdao_page_translate":m.openYoudao();break;case"baidu_page_translate":m.openBaiduPage();break;case"sogou_page_translate":m.openSogouPage();break;case"microsoft_page_translate":m.openMicrosoftPage();break;case"view_as_pdf":Object(g.c)(a,"view_as_pdf_ba"!==e.menuItemId);break;case"copy_pdf_url":{const t=Object(g.a)(e.pageUrl);t&&Object(w.a)(t);break}case"saladict":m.requestSelection();break;case"search_history":Object(r.b)(browser.runtime.getURL("history.html"));break;case"notebook":Object(r.b)(browser.runtime.getURL("notebook.html"));break;default:const s=window.appConfig.contextMenus.all[t];if(s){const e="string"==typeof s?s:s.url;e&&Object(r.b)(e.replace("%s",n))}}}constructor(){this.i18nManager=void 0,this.i18nManager=u.getInstance();const e=Object(o.b)().pipe(Object(d.a)((e,t)=>e&&t&&s()(e.contextMenus.selected,t.contextMenus.selected)),Object(p.a)(e=>!!e));Object(h.a)(e,this.i18nManager.getFixedT$$("menus")).pipe(Object(f.a)(this.setContextMenus)).subscribe(),browser.contextMenus.onClicked.addListener(e=>this.handleContextMenusClick(e)),r.a.addListener("CONTEXT_MENUS_CLICK",e=>{let{payload:t}=e;return this.handleContextMenusClick(t)})}async setContextMenus(e){let[{contextMenus:t},n]=e;browser.extension.inIncognitoContext||await browser.contextMenus.removeAll();const r=["audio","editable","frame","image","link","selection","page","video"],a=new Set(["selection"]),s=[],o=[];for(const e of t.selected){let t;switch(e){case"google_page_translate":case"google_cn_page_translate":case"youdao_page_translate":case"sogou_page_translate":case"baidu_page_translate":case"microsoft_page_translate":t=r,o.push(e);break;case"view_as_pdf":a.add("link"),a.add("page"),t=["link","page"];break;case"copy_pdf_url":a.add("page"),t=["page"];break;default:t=["selection"]}s.push({id:e,title:i(e),contexts:t})}if(s.length>1){o.length>0&&r.forEach(e=>a.add(e)),await c({id:"saladict_container",title:n("saladict"),contexts:[...a]});for(const e of s)e.parentId="saladict_container",await c(e)}else s.length>0&&await c(s[0]);if(await c({id:"view_as_pdf_ba",title:n("view_as_pdf"),contexts:["browser_action","page_action"]}),o.length>2){await c({id:"saladict_ba_container",title:n("page_translations"),contexts:["browser_action","page_action"]});for(const e of o)await c({id:e+"_ba",parentId:"saladict_ba_container",title:i(e),contexts:["browser_action","page_action"]})}else if(o.length>0)for(const e of o)await c({id:e+"_ba",title:i(e),contexts:["browser_action","page_action"]});else await c({id:"google_cn_page_translate_ba",title:n("google_cn_page_translate"),contexts:["browser_action","page_action"]}),await c({id:"youdao_page_translate_ba",title:n("youdao_page_translate"),contexts:["browser_action","page_action"]});function i(e){const r=t.all[e];return r&&"string"!=typeof r?r.name:n(e)}function c(e){return new Promise(t=>{browser.contextMenus.create(e,()=>{browser.runtime.lastError&&console.error(browser.runtime.lastError),t()})})}await c({type:"separator",id:Date.now().toString(),contexts:["browser_action"]}),await c({id:"search_history",title:n("history_title"),contexts:["browser_action"]}),await c({id:"notebook",title:n("notebook_title"),contexts:["browser_action"]})}}m.init=m.getInstance,m.instance=void 0},603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(158);r.__exportStar(n(1147),t),r.__exportStar(n(1149),t),r.__exportStar(n(1150),t)},613:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(31),a=n(3);let s=[],o=[];function i(e){browser.webRequest.onBeforeRequest.hasListener(h)||(s=e.pdfBlacklist,o=e.pdfWhitelist,e.pdfSniff&&u(),Object(r.a)(e=>{let{newConfig:t,oldConfig:n}=e;t&&(s=t.pdfBlacklist,o=t.pdfWhitelist,n&&t.pdfSniff===n.pdfSniff||(t.pdfSniff?u():(browser.webRequest.onBeforeRequest.removeListener(h),browser.webRequest.onHeadersReceived.removeListener(d))))}))}async function c(e,t){const n=browser.runtime.getURL("assets/pdf/web/viewer.html");if(e)return Object(a.b)(n+"?file="+encodeURIComponent(e));const r=await browser.tabs.query({active:!0,currentWindow:!0});return r.length>0&&r[0].url&&(/pdf$/i.test(r[0].url)||t)?Object(a.b)(n+"?file="+encodeURIComponent(r[0].url)):Object(a.b)(n)}function l(e){if(!e)return;const t=new URL(e);return decodeURIComponent(t.searchParams.get("file")||"")}function u(){browser.webRequest.onBeforeRequest.hasListener(h)||browser.webRequest.onBeforeRequest.addListener(h,{urls:["ftp://*/*.pdf","ftp://*/*.PDF","file://*/*.pdf","file://*/*.PDF"],types:["main_frame","sub_frame"]},["blocking"]),browser.webRequest.onHeadersReceived.hasListener(d)||browser.webRequest.onHeadersReceived.addListener(d,{urls:["https://*/*","https://*/*","http://*/*","http://*/*"],types:["main_frame","sub_frame"]},["blocking","responseHeaders"])}function h(e){let{url:t}=e;if(!s.some(e=>{let[n]=e;return new RegExp(n).test(t)})||!o.every(e=>{let[n]=e;return!new RegExp(n).test(t)}))return{redirectUrl:browser.runtime.getURL("assets/pdf/web/viewer.html?file=".concat(encodeURIComponent(t)))}}function d(e){let{responseHeaders:t,url:n}=e;if(!t)return;if(s.some(e=>{let[t]=e;return new RegExp(t).test(n)})&&o.every(e=>{let[t]=e;return!new RegExp(t).test(n)}))return;const r=t.find(e=>{let{name:t}=e;return"content-type"===t.toLowerCase()});if(r&&r.value){const e=r.value.toLowerCase();if(e.endsWith("pdf")||"application/octet-stream"===e&&n.endsWith(".pdf"))return{redirectUrl:browser.runtime.getURL("assets/pdf/web/viewer.html?file=".concat(encodeURIComponent(n)))}}}},614:function(e,t,n){"use strict";function r(e){const t=document.createElement("textarea");t.textContent=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.blur(),document.body.removeChild(t)}function a(){{let e=document.getElementById("saladict-paste");return e||((e=document.createElement("textarea")).id="saladict-paste",document.body.appendChild(e)),e.value="",e.focus(),document.execCommand("paste"),e.value||""}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},615:function(e,t,n){"use strict";var r=n(3),a=n(60),s=n(880),o=n(668),i=n(38),c=n(161),l=n(134);class u{static getInstance(){return u.instance||(u.instance=new u)}constructor(){this.audio=void 0}reset(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.audio.src="",this.audio.onended=null)}load(e){return this.reset(),this.audio=new Audio(e)}async play(e){if(!e)return void this.reset();const t=this.load(e),n=new Promise(e=>{t.onended=e});await t.play().then(()=>Object(a.c)(n,4e3)).catch(()=>{})}}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}u.instance=void 0;const f=function(){return browser.windows.update(...arguments).catch(console.warn)};class g{constructor(){this.snapshot=null}async takeSnapshot(){this.snapshot=null;try{const e=await browser.windows.getLastFocused({windowTypes:["normal"]});"minimized"!==e.state&&(this.snapshot=e)}catch(e){console.warn(e)}return this.snapshot}destroySnapshot(){this.snapshot=null}async makeRoomForSidebar(e,t){const n=this.snapshot;if(!n||null==n.id)return;const r=t&&t.width||window.appConfig.panelWidth,a=null!=n.top&&null!=n.left&&null!=n.width&&null!=n.height?{top:n.top,left:"right"===e?n.left:n.left+r,width:n.width-r,height:n.height}:{top:0,left:"right"===e?0:r,width:window.screen.availWidth-r,height:window.screen.availHeight};"right"===e&&await f(n.id,d({},a,{left:a.left+1})),await f(n.id,a)}async restoreSnapshot(){this.snapshot&&null!=this.snapshot.id&&await f(this.snapshot.id,{top:this.snapshot.top,left:this.snapshot.left,width:this.snapshot.width,height:this.snapshot.height})}}class w{constructor(){this.qsPanelId=null,this.snapshot=null,this.isSidebar=!1,this.mainWindowsManager=new g}async create(){this.isSidebar=!1;let e="";try{if("selection"===window.appConfig.tripleCtrlPreload){const t=(await browser.tabs.query({active:!0,lastFocusedWindow:!0}))[0];if(t&&t.id){const n=await r.a.send(t.id,{type:"PRELOAD_SELECTION"});n&&(e="&word="+encodeURIComponent(JSON.stringify(n)))}}}catch(e){}const t=await browser.windows.create(d({},window.appConfig.tripleCtrlSidebar?await this.getSidebarRect(window.appConfig.tripleCtrlSidebar):this.getDefaultRect(),{type:"popup",url:browser.runtime.getURL("quick-search.html?sidebar=".concat(window.appConfig.tripleCtrlSidebar).concat(e))})).catch(e=>{browser.notifications.create({type:"basic",iconUrl:browser.runtime.getURL("assets/icon-128.png"),title:"Saladict",message:e.message,priority:2,eventTime:Date.now()+5e3})});t&&t.id&&(this.qsPanelId=t.id,window.appConfig.tripleCtrlSidebar&&(this.isSidebar=!0,await this.mainWindowsManager.makeRoomForSidebar(window.appConfig.tripleCtrlSidebar,t)),(await browser.tabs.query({})).forEach(e=>{e.id&&e.windowId!==this.qsPanelId&&r.a.send(e.id,{type:"QS_PANEL_CHANGED",payload:null!=this.qsPanelId})}))}async getWin(){return this.qsPanelId?browser.windows.get(this.qsPanelId).catch(()=>null):null}async destroy(){(await browser.tabs.query({})).forEach(e=>{e.id&&e.windowId!==this.qsPanelId&&r.a.send(e.id,{type:"QS_PANEL_CHANGED",payload:!1})}),this.qsPanelId=null,this.isSidebar=!1,this.destroySnapshot(),await this.mainWindowsManager.restoreSnapshot(),this.mainWindowsManager.destroySnapshot()}isQsPanel(e){return null!=e&&e===this.qsPanelId}async hasCreated(){const e=await this.getWin();return e||(this.qsPanelId=null),!!e}async focus(){if(null!=this.qsPanelId){await f(this.qsPanelId,{focused:!0});const[e]=await browser.tabs.query({windowId:this.qsPanelId});e&&e.id&&await r.a.send(e.id,{type:"QS_PANEL_FOCUSED"})}}async takeSnapshot(){null!=this.qsPanelId&&(this.snapshot=await browser.windows.get(this.qsPanelId).catch(()=>null))}destroySnapshot(){this.snapshot=null}async restoreSnapshot(){await this.mainWindowsManager.restoreSnapshot(),null!=this.snapshot&&null!=this.snapshot.id?await f(this.snapshot.id,{top:this.snapshot.top,left:this.snapshot.left,width:this.snapshot.width,height:this.snapshot.height}):null!=this.qsPanelId&&await f(this.qsPanelId,d({focused:!0},this.getDefaultRect())),this.destroySnapshot()}async moveToSidebar(e){null!=this.qsPanelId&&(await this.takeSnapshot(),await f(this.qsPanelId,await this.getSidebarRect(e)),await this.mainWindowsManager.makeRoomForSidebar(e,this.snapshot))}async toggleSidebar(e){await this.hasCreated()&&(this.isSidebar?await this.restoreSnapshot():await this.moveToSidebar(e),this.isSidebar=!this.isSidebar)}getDefaultRect(){const{tripleCtrlLocation:e,tripleCtrlHeight:t}=window.appConfig;let n=10,r=30,a=window.appConfig.panelWidth,s=window.appConfig.tripleCtrlHeight;switch(e){case"CENTER":n=(window.screen.width-a)/2,r=(window.screen.height-t)/2;break;case"TOP":n=(window.screen.width-a)/2,r=30;break;case"RIGHT":n=window.screen.width-a-30,r=(window.screen.height-t)/2;break;case"BOTTOM":n=(window.screen.width-a)/2,r=window.screen.height-s-10;break;case"LEFT":n=10,r=(window.screen.height-t)/2;break;case"TOP_LEFT":n=10,r=30;break;case"TOP_RIGHT":n=window.screen.width-a-30,r=30;break;case"BOTTOM_LEFT":n=10,r=window.screen.height-s-10;break;case"BOTTOM_RIGHT":n=window.screen.width-a-30,r=window.screen.height-s-10}return{top:Math.round(r),left:Math.round(n),width:Math.round(a),height:Math.round(s)}}async getSidebarRect(e){const t=this.snapshot&&this.snapshot.width||window.appConfig.panelWidth,n=await this.mainWindowsManager.takeSnapshot();return n&&null!=n.top&&null!=n.left&&null!=n.width&&null!=n.height?{top:Math.round(n.top),left:Math.round("right"===e?Math.max(n.width-t,t):n.left),width:Math.round(t),height:Math.round(n.height)}:{top:0,left:Math.round("right"===e?window.screen.availWidth-t:0),width:Math.round(t),height:Math.round(window.screen.availHeight)}}}var m=n(614);n(626);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return j}));class j{static getInstance(){return j.instance||(j.instance=new j)}constructor(){this.qsPanelManager=void 0,this.qsPanelManager=new w,r.a.addListener((e,t)=>{switch(e.type){case"OPEN_DICT_SRC_PAGE":return this.openSrcPage(e.payload);case"OPEN_URL":return Object(r.b)(e.payload.url,e.payload.self);case"PLAY_AUDIO":return u.getInstance().play(e.payload);case"FETCH_DICT_RESULT":return this.fetchDictResult(e.payload);case"DICT_ENGINE_METHOD":return this.callDictEngineMethod(e.payload);case"GET_CLIPBOARD":return Promise.resolve(Object(m.b)());case"INJECT_DICTPANEL":return Object(o.a)(t.tab);case"QUERY_QS_PANEL":return this.qsPanelManager.hasCreated();case"OPEN_QS_PANEL":return this.openQSPanel();case"CLOSE_QS_PANEL":return this.qsPanelManager.destroy();case"QS_SWITCH_SIDEBAR":return this.qsPanelManager.toggleSidebar(e.payload);case"IS_IN_NOTEBOOK":return Object(l.f)(e.payload);case"SAVE_WORD":return Object(l.g)(e.payload).then(e=>(setTimeout(()=>r.a.send({type:"WORD_SAVED"}),0),e));case"DELETE_WORDS":return Object(l.b)(e.payload).then(e=>(setTimeout(()=>r.a.send({type:"WORD_SAVED"}),0),e));case"GET_WORDS_BY_TEXT":return Object(l.e)(e.payload);case"GET_WORDS":return Object(l.d)(e.payload);case"GET_SUGGESTS":return Object(s.a)(e.payload);case"SYNC_SERVICE_INIT":return Object(c.c)(e.payload);case"SYNC_SERVICE_DOWNLOAD":return Object(c.b)(e.payload);case"SYNC_SERVICE_UPLOAD":return Object(c.d)(e.payload);case"YOUDAO_TRANSLATE_AJAX":return this.youdaoTranslateAjax(e.payload)}})}async openQSPanel(){await this.qsPanelManager.hasCreated()?this.qsPanelManager.focus():await this.qsPanelManager.create()}async searchClipboard(){const e=Object(m.b)();e&&(await this.qsPanelManager.hasCreated()||(await this.qsPanelManager.create(),await Object(a.d)(1e3)),await r.a.send({type:"QS_PANEL_SEARCH_TEXT",payload:Object(i.e)({text:e})}))}async openSrcPage(e){let{id:t,text:a}=e;const s=n(781)("./"+t+"/engine").getSrcPage;return Object(r.b)(await s(a,window.appConfig,window.activeProfile))}fetchDictResult(e){let t;try{t=n(781)("./"+e.id+"/engine").search}catch(e){return Promise.reject(e)}const r=e.payload||{};return Object(a.c)(t(e.text,window.appConfig,window.activeProfile,r),25e3).catch(async n=>"NETWORK_ERROR"===n.message?(await Object(a.d)(500),Object(a.c)(t(e.text,window.appConfig,window.activeProfile,r),25e3)):Promise.reject(n)).then(t=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e})({},t,{id:e.id})).catch(t=>({result:null,id:e.id}))}async callDictEngineMethod(e){return n(781)("./".concat(e.id,"/engine"))[e.method](...e.args||[])}youdaoTranslateAjax(e){return new Promise(t=>{const n=new XMLHttpRequest;n.onreadystatechange=()=>{if(4===n.readyState){const r=200===n.status?n.responseText:null;t({response:r,index:e.index})}},n.open(e.type,e.url,!0),"POST"===e.type?(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(e.data)):n.send(null)})}}j.instance=void 0,j.init=j.getInstance},626:function(e,t){},629:function(e,t,n){"use strict";t.a=()=>({lang:"11111111",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:320,selectionWC:{min:1,max:999999999999999},options:{pdfNewline:!1,tl:"default"},options_sel:{tl:["default","zh-CN","zh-TW","en","ja","ko","fr","de","es","ru"]}})},630:function(e,t,n){"use strict";t.a=()=>({lang:"11000000",selectionLang:{english:!0,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:240,selectionWC:{min:1,max:5},options:{tense:!0,phsym:!0,cdef:!0,related:!0,sentence:4}})},631:function(e,t,n){"use strict";t.a=()=>({lang:"11010000",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:320,selectionWC:{min:1,max:999999999999999},options:{pdfNewline:!1,tl:"default"},options_sel:{tl:["default","zh-CN","en","ja"]}})},632:function(e,t,n){"use strict";t.a=()=>({lang:"11100000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5}})},633:function(e,t,n){"use strict";t.a=()=>({lang:"11000000",selectionLang:{english:!0,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:300,selectionWC:{min:1,max:100},options:{dict:!0,senbi:!0,seneng:!0}})},634:function(e,t,n){"use strict";t.a=()=>({lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:300,selectionWC:{min:1,max:5},options:{cibaFirst:!0}})},635:function(e,t,n){"use strict";t.a=()=>({lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{resultnum:4,chart:!0}})},636:function(e,t,n){"use strict";t.a=()=>({lang:"11000000",selectionLang:{english:!0,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:240,selectionWC:{min:1,max:5},options:{resultnum:10}})},637:function(e,t,n){"use strict";t.a=()=>({lang:"11111111",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:320,selectionWC:{min:1,max:999999999999999},options:{pdfNewline:!1,cnfirst:!0,concurrent:!1,tl:"default"},options_sel:{tl:["default","zh-CN","zh-TW","en","ja","ko","fr","de","es","ru"]}})},638:function(e,t,n){"use strict";t.a=()=>({lang:"11110000",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:240,selectionWC:{min:1,max:5},options:{enresult:!0}})},639:function(e,t,n){"use strict";t.a=()=>({lang:"00100000",selectionLang:{english:!1,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5}})},640:function(e,t,n){"use strict";t.a=()=>({lang:"10011111",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:10},options:{related:!0,chsas:"jp/jc",engas:"w",uas:"fr",aas:"fr",eas:"fr"},options_sel:{chsas:["jp/cj","jp/jc","kr","w","fr","de","es"],engas:["w","fr","de","es"],uas:["fr","de","es"],aas:["fr","de"],eas:["fr","es"]}})},641:function(e,t,n){"use strict";t.a=()=>({lang:"11010000",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:300,selectionWC:{min:1,max:99999},options:{lang:"zheng"},options_sel:{lang:["zheng","engjp","zhjp"]}})},642:function(e,t,n){"use strict";t.a=()=>({lang:"00100000",selectionLang:{english:!1,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5}})},643:function(e,t,n){"use strict";t.a=()=>({lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{wordfams:!1,collocations:!0,grammar:!0,thesaurus:!0,examples:!0,bussinessFirst:!0,related:!0}})},644:function(e,t,n){"use strict";t.a=()=>({lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{related:!0}})},645:function(e,t,n){"use strict";t.a=()=>({lang:"10010000",selectionLang:{english:!1,chinese:!0,japanese:!0,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5}})},646:function(e,t,n){"use strict";t.a=()=>({lang:"01011000",selectionLang:{english:!1,chinese:!0,japanese:!0,korean:!0,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:465,selectionWC:{min:1,max:10},options:{hanAsJa:!1,korAsJa:!1}})},647:function(e,t,n){"use strict";t.a=()=>({lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{related:!0}})},648:function(e,t,n){"use strict";t.a=()=>({lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:150,selectionWC:{min:1,max:30},options:{basic:!0,sentence:!0}})},649:function(e,t,n){"use strict";t.a=()=>({lang:"11111111",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:320,selectionWC:{min:1,max:999999999999999},options:{pdfNewline:!1,tl:"default"},options_sel:{tl:["default","zh-CN","zh-TW","en","ja","ko","fr","de","es","ru"]}})},650:function(e,t,n){"use strict";t.a=()=>({lang:"11011111",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:320,selectionWC:{min:1,max:999999999999999},options:{pdfNewline:!1,tl:"default"},options_sel:{tl:["default","zh-CN","en","ja","ko","fr","de","es","ru"]}})},651:function(e,t,n){"use strict";t.a=()=>({lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:180,selectionWC:{min:1,max:5},options:{resultnum:4}})},652:function(e,t,n){"use strict";t.a=()=>({lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:180,selectionWC:{min:1,max:5}})},653:function(e,t,n){"use strict";t.a=()=>({lang:"00010000",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:20}})},654:function(e,t,n){"use strict";t.a=()=>({lang:"10010000",selectionLang:{english:!0,chinese:!1,japanese:!0,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:400,selectionWC:{min:1,max:999}})},655:function(e,t,n){"use strict";t.a=()=>({lang:"10000000",selectionLang:{english:!0,chinese:!1,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:5},options:{defs:!0,phrase:!0,derived:!0,arts:!0,related:!0}})},656:function(e,t,n){"use strict";t.a=()=>({lang:"11110000",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:420,selectionWC:{min:1,max:999999999999999},options:{lang:"auto"},options_sel:{lang:["auto","zh","zh-cn","zh-tw","zh-hk","en","ja","fr","de"]}})},657:function(e,t,n){"use strict";t.a=()=>({lang:"11000000",selectionLang:{english:!0,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:265,selectionWC:{min:1,max:999999999999999},options:{basic:!0,collins:!0,discrimination:!0,sentence:!0,translation:!0,related:!0}})},658:function(e,t,n){"use strict";t.a=()=>({lang:"11011111",selectionLang:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:320,selectionWC:{min:1,max:999999999999999},options:{pdfNewline:!1,tl:"default"},options_sel:{tl:["default","zh-CN","en","pt","es","ja","ko","fr","ru"]}})},659:function(e,t,n){"use strict";t.a=()=>({lang:"01000000",selectionLang:{english:!1,chinese:!0,japanese:!1,korean:!1,french:!1,spanish:!1,deutsch:!1,others:!1,matchAll:!1},defaultUnfold:{english:!0,chinese:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!0,matchAll:!1},preferredHeight:400,selectionWC:{min:1,max:5},options:{audio:!1}})},668:function(e,t,n){"use strict";async function r(e){if(e&&e.id){const t=e.id,n=browser.runtime.getManifest();if(n.content_scripts)for(const e of n.content_scripts){if(e.js)for(const n of e.js)await browser.tabs.executeScript(t,{file:"/"===n[0]?n:"/".concat(n),allFrames:e.all_frames,matchAboutBlank:e.match_about_blank,runAt:e.run_at});if(e.css)for(const n of e.css)await browser.tabs.insertCSS(t,{file:"/"===n[0]?n:"/".concat(n),allFrames:e.all_frames,matchAboutBlank:e.match_about_blank,runAt:e.run_at})}}}n.d(t,"a",(function(){return r}))},707:function(e){e.exports=JSON.parse('{"name":{"en":"Baidu Translate","zh-CN":"百度翻译","zh-TW":"百度翻譯"},"options":{"pdfNewline":{"en":"Keep linebreaks on PDF","zh-CN":"PDF 保持换行","zh-TW":"PDF 保持換行"},"tl":{"en":"Target language","zh-CN":"目标语言","zh-TW":"目標語言"}}}')},708:function(e){e.exports=JSON.parse('{"name":{"en":"Bing Dict","zh-CN":"必应词典","zh-TW":"必應詞典"},"options":{"tense":{"en":"Show sense","zh-CN":"显示单词时态","zh-TW":"展示單詞時態"},"phsym":{"en":"Show pronunciation","zh-CN":"显示单词发音","zh-TW":"展示單詞發音"},"cdef":{"en":"Show definitions","zh-CN":"显示单词解释","zh-TW":"展示單詞解釋"},"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"},"sentence":{"en":"Show sentences","zh-CN":"显示例句","zh-TW":"展示例句"},"sentence_unit":{"en":"results","zh-CN":"个","zh-TW":"個"}}}')},709:function(e){e.exports=JSON.parse('{"name":{"en":"LingoCloud","zh-CN":"彩云小译","zh-TW":"彩雲小譯"},"options":{"pdfNewline":{"en":"Keep linebreaks on PDF","zh-CN":"PDF 保持换行","zh-TW":"PDF 保持換行"},"tl":{"en":"Target language","zh-CN":"目标语言","zh-TW":"目標語言"}}}')},710:function(e){e.exports=JSON.parse('{"name":{"en":"Cambridge Dictionary","zh-CN":"剑桥词典","zh-TW":"劍橋詞典"}}')},711:function(e){e.exports=JSON.parse('{"name":{"en":"CNKI Dict","zh-CN":"CNKI翻译助手","zh-TW":"CNKI翻譯助手"},"options":{"dict":{"en":"Show dict result","zh-CN":"显示词典结果","zh-TW":"展示字典結果"},"senbi":{"en":"Show bilingual sentences","zh-CN":"显示双语例句","zh-TW":"展示雙語例句"},"seneng":{"en":"Show English sentences","zh-CN":"显示英文例句","zh-TW":"展示英文例句"},"digests":{"en":"Show relevant digests","zh-CN":"显示相关文摘","zh-TW":"展示相關文摘"}}}')},712:function(e){e.exports=JSON.parse('{"name":{"en":"COBUILD","zh-CN":"柯林斯高阶","zh-TW":"柯林斯高階"},"options":{"cibaFirst":{"en":"Prefer bilingual dictionary","zh-CN":"优先查双语词典","zh-TW":"優先查雙語詞典"}},"helps":{"cibaFirst":{"en":"Bilingual server is less stable","zh-CN":"双语词典服务器不稳定，解释没全英丰富","zh-TW":"雙語詞典伺服器不穩定，解釋沒全英豐富"}}}')},713:function(e){e.exports=JSON.parse('{"name":{"en":"Etymonline","zh-CN":"Etymonline","zh-TW":"Etymonline"},"options":{"resultnum":{"en":"Show","zh-CN":"结果数量","zh-TW":"結果數量"},"resultnum_unit":{"en":"results","zh-CN":"个","zh-TW":"個"},"chart":{"en":"Show Chart","zh-CN":"显示图表","zh-TW":"顯示圖表"}}}')},714:function(e){e.exports=JSON.parse('{"name":{"en":"Eudic","zh-CN":"双语例句","zh-TW":"雙語例句"},"options":{"resultnum":{"en":"Show","zh-CN":"结果数量","zh-TW":"結果數量"},"resultnum_unit":{"en":"results","zh-CN":"个","zh-TW":"個"}}}')},715:function(e){e.exports=JSON.parse('{"name":{"en":"Google Translation","zh-CN":"谷歌翻译","zh-TW":"谷歌翻譯"},"options":{"pdfNewline":{"en":"Keep linebreaks on PDF","zh-CN":"PDF 保持换行","zh-TW":"PDF 保持換行"},"cnfirst":{"en":"Use google.cn first","zh-CN":"优先使用 google.cn","zh-TW":"優先使用 google.cn"},"concurrent":{"en":"Search concurrently","zh-CN":"并行查询","zh-TW":"並行查詢"},"tl":{"en":"Target language","zh-CN":"目标语言","zh-TW":"目標語言"}},"helps":{"concurrent":{"en":"Search .com and .cn concurrently","zh-CN":"同时搜索 .com 和 .cn 取最先返回的结果","zh-TW":"同時搜尋 .com 和 .cn 取最先返回的結果"}}}')},716:function(e){e.exports=JSON.parse('{"name":{"en":"Google Dictionary","zh-CN":"谷歌词典","zh-TW":"谷歌詞典"},"options":{"enresult":{"en":"English Result","zh-CN":"强制显示英文结果","zh-TW":"強制顯示英文結果"}}}')},717:function(e){e.exports=JSON.parse('{"name":{"en":"國語辭典","zh-CN":"国语辞典","zh-TW":"國語辭典"}}')},718:function(e){e.exports=JSON.parse('{"name":{"en":"Hu Jiang","zh-CN":"沪江小D","zh-TW":"沪江小D"},"options":{"engas":{"en":"Treat English as","zh-CN":"对全英文使用词典","zh-TW":"對全英文使用字典"},"chsas":{"en":"Treat Chinese as","zh-CN":"对全中文使用词典","zh-TW":"對全中文使用字典"},"uas":{"en":"Treat \'ü\' as","zh-CN":"将 \'ü\' 字符当作","zh-TW":"把 \'ü\' 字元當成"},"aas":{"en":"Treat \'ä\' as","zh-CN":"将 \'ä\' 字符当作","zh-TW":"把 \'ä\' 字元當成"},"eas":{"en":"Treat \'é\' as","zh-CN":"将 \'é\' 字符当作","zh-TW":"把 \'é\' 字元當成"},"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"},"chsas-jp/cj":{"en":"中 → 日","zh-CN":"中 → 日","zh-TW":"中 → 日"},"chsas-jp/jc":{"en":"日 → 中","zh-CN":"日 → 中","zh-TW":"日 → 中"},"chsas-kr":{"en":"Korean","zh-CN":"韩文","zh-TW":"韓文"},"chsas-w":{"en":"English","zh-CN":"英文","zh-TW":"英文"},"chsas-fr":{"en":"French","zh-CN":"法文","zh-TW":"法文"},"chsas-de":{"en":"Deutsch","zh-CN":"德文","zh-TW":"德文"},"chsas-es":{"en":"Spanish","zh-CN":"西班牙文","zh-TW":"西班牙文"},"engas-w":{"en":"English","zh-CN":"英文","zh-TW":"英文"},"engas-fr":{"en":"French","zh-CN":"法文","zh-TW":"法文"},"engas-de":{"en":"Deutsch","zh-CN":"德文","zh-TW":"德文"},"engas-es":{"en":"Spanish","zh-CN":"西班牙文","zh-TW":"西班牙文"},"uas-fr":{"en":"French","zh-CN":"法文","zh-TW":"法文"},"uas-de":{"en":"Deutsch","zh-CN":"德文","zh-TW":"德文"},"uas-es":{"en":"Spanish","zh-CN":"西班牙文","zh-TW":"西班牙文"},"aas-fr":{"en":"French","zh-CN":"法文","zh-TW":"法文"},"aas-de":{"en":"Deutsch","zh-CN":"德文","zh-TW":"德文"},"eas-fr":{"en":"French","zh-CN":"法文","zh-TW":"法文"},"eas-es":{"en":"Spanish","zh-CN":"西班牙文","zh-TW":"西班牙文"}}}')},719:function(e){e.exports=JSON.parse('{"name":{"en":"Jukuu","zh-CN":"句酷","zh-TW":"句酷"},"options":{"lang":{"en":"Language","zh-CN":"语言","zh-TW":"語言"},"lang-zheng":{"en":"Chinese-English","zh-CN":"中英","zh-TW":"中英"},"lang-engjp":{"en":"English-Japanese","zh-CN":"英日","zh-TW":"英日"},"lang-zhjp":{"en":"Chinese-Japanese","zh-CN":"中日","zh-TW":"中日"}}}')},720:function(e){e.exports=JSON.parse('{"name":{"en":"兩岸詞典","zh-CN":"两岸词典","zh-TW":"兩岸詞典"}}')},721:function(e){e.exports=JSON.parse('{"name":{"en":"Longman Dictionary","zh-CN":"朗文词典","zh-TW":"朗文詞典"},"options":{"wordfams":{"en":"Show word family","zh-CN":"显示单词家族","zh-TW":"展示單字家族"},"collocations":{"en":"Show collocations","zh-CN":"显示惯用搭配","zh-TW":"展示慣用搭配"},"grammar":{"en":"Show grammar","zh-CN":"显示语法解释","zh-TW":"展示文法講解"},"thesaurus":{"en":"Show thesaurus","zh-CN":"显示同义词","zh-TW":"展示同義詞"},"examples":{"en":"Show examples","zh-CN":"显示例句","zh-TW":"展示例句"},"bussinessFirst":{"en":"Show bussiness result first","zh-CN":"优先显示商务词典","zh-TW":"優先展示商務字典"},"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"}}}')},722:function(e){e.exports=JSON.parse('{"name":{"en":"Macmillan","zh-CN":"麦克米伦","zh-TW":"麥克米倫"},"options":{"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"}}}')},723:function(e){e.exports=JSON.parse('{"name":{"en":"MOJi辞書","zh-CN":"MOJi辞書","zh-TW":"MOJi辞書"}}')},724:function(e){e.exports=JSON.parse('{"name":{"en":"Naver韩国语词典","zh-CN":"Naver韩国语词典","zh-TW":"Naver韩国语词典"},"options":{"hanAsJa":{"en":"Search Chinese with Japanese Dictionary","zh-CN":"用日语词典查中文","zh-TW":"用日語詞典查漢字"},"korAsJa":{"en":"Search Korean with Japanese Dictionary","zh-CN":"用日语词典查韩语","zh-TW":"用日语词典查韓語"}}}')},725:function(e){e.exports=JSON.parse('{"name":{"en":"OALD","zh-CN":"牛津高阶","zh-TW":"牛津高階"},"options":{"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"}}}')},726:function(e){e.exports=JSON.parse('{"name":{"en":"Shanbay Dictionary","zh-CN":"扇贝词典","zh-TW":"扇貝詞典"},"options":{"basic":{"en":"Show basic meaning","zh-CN":"显示简单释义","zh-TW":"顯示簡單解釋"},"sentence":{"en":"Show sentences","zh-CN":"显示权威例句","zh-TW":"顯示權威例句"}}}')},727:function(e){e.exports=JSON.parse('{"name":{"en":"Sogou Translation","zh-CN":"搜狗翻译","zh-TW":"搜狗翻譯"},"options":{"pdfNewline":{"en":"Keep linebreaks on PDF","zh-CN":"PDF 保持换行","zh-TW":"PDF 保持換行"},"tl":{"en":"Target language","zh-CN":"目标语言","zh-TW":"目標語言"}}}')},728:function(e){e.exports=JSON.parse('{"name":{"en":"Tencent Translate","zh-CN":"腾讯翻译君","zh-TW":"騰訊翻譯君"},"options":{"pdfNewline":{"en":"Keep linebreaks on PDF","zh-CN":"PDF 保持换行","zh-TW":"PDF 保持換行"},"tl":{"en":"Target language","zh-CN":"目标语言","zh-TW":"目標語言"}}}')},729:function(e){e.exports=JSON.parse('{"name":{"en":"Urban","zh-CN":"Urban","zh-TW":"Urban"},"options":{"resultnum":{"en":"Show","zh-CN":"结果数量","zh-TW":"結果數量"},"resultnum_unit":{"en":"results","zh-CN":"个","zh-TW":"個"}}}')},730:function(e){e.exports=JSON.parse('{"name":{"en":"Vocabulary.com","zh-CN":"Vocabulary.com","zh-TW":"Vocabulary.com"}}')},731:function(e){e.exports=JSON.parse('{"name":{"en":"Weblio","zh-CN":"Weblio 辞書","zh-TW":"Weblio 辞書"}}')},732:function(e){e.exports=JSON.parse('{"name":{"en":"Weblio ejje","zh-CN":"Weblio 英和和英","zh-TW":"Weblio 英和和英"}}')},733:function(e){e.exports=JSON.parse('{"name":{"en":"Merriam-Webster\'s Learner\'s Dictionary","zh-CN":"韦氏学习词典","zh-TW":"韋氏學習字典"},"options":{"defs":{"en":"Show definitions","zh-CN":"显示释义","zh-TW":"顯示解釋"},"phrase":{"en":"Show phrases","zh-CN":"显示词组","zh-TW":"顯示片語"},"derived":{"en":"Show derived words","zh-CN":"显示派生词","zh-TW":"顯示衍生字"},"arts":{"en":"Show pictures","zh-CN":"显示图片释义","zh-TW":"顯示圖片解釋"},"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"}}}')},734:function(e){e.exports=JSON.parse('{"name":{"en":"Wikipedia","zh-CN":"维基百科","zh-TW":"維基百科"},"options":{"lang":{"en":"Language","zh-CN":"百科语言","zh-TW":"百科語言"},"lang-auto":{"en":"Auto (respect Wiki settings)","zh-CN":"自动（遵循维基账户设定）","zh-TW":"自动（遵循維基賬戶設定）"},"lang-zh":{"en":"中文（简繁由维基账户设定）","zh-CN":"中文（简繁由维基账户设定）","zh-TW":"中文（簡繁由維基賬戶設定）"},"lang-zh-cn":{"en":"强制简体中文子页面","zh-CN":"强制简体中文子页面","zh-TW":"强制简体中文子页面"},"lang-zh-tw":{"en":"強制台灣正體子頁面","zh-CN":"強制台灣正體子頁面","zh-TW":"強制台灣正體子頁面"},"lang-zh-hk":{"en":"強制香港繁體子頁面","zh-CN":"強制香港繁體子頁面","zh-TW":"強制香港繁體子頁面"},"lang-en":{"en":"English","zh-CN":"English","zh-TW":"English"},"lang-ja":{"en":"日本語","zh-CN":"日本語","zh-TW":"日本語"},"lang-fr":{"en":"Français","zh-CN":"Français","zh-TW":"Français"},"lang-de":{"en":"Deutschsprachige","zh-CN":"Deutschsprachige","zh-TW":"Deutschsprachige"}}}')},735:function(e){e.exports=JSON.parse('{"name":{"en":"Youdao Dictionary","zh-CN":"有道词典","zh-TW":"有道詞典"},"options":{"basic":{"en":"Show basic meaning","zh-CN":"显示简单释义","zh-TW":"顯示簡單解釋"},"collins":{"en":"Show Collins result","zh-CN":"显示柯林斯双解","zh-TW":"顯示柯林斯雙解"},"discrimination":{"en":"Show discrimination","zh-CN":"显示词语辨析","zh-TW":"顯示詞語辨析"},"sentence":{"en":"Show sentences","zh-CN":"显示权威例句","zh-TW":"顯示權威例句"},"translation":{"en":"Show translation","zh-CN":"显示有道翻译","zh-TW":"顯示有道翻譯"},"related":{"en":"Show related results","zh-CN":"失败时显示备选","zh-TW":"失敗時顯示備選"}}}')},736:function(e){e.exports=JSON.parse('{"name":{"en":"Youdao Translate","zh-CN":"有道翻译","zh-TW":"有道翻譯"},"options":{"pdfNewline":{"en":"Keep linebreaks on PDF","zh-CN":"PDF 保持换行","zh-TW":"PDF 保持換行"},"tl":{"en":"Target language","zh-CN":"目标语言","zh-TW":"目標語言"}}}')},737:function(e){e.exports=JSON.parse('{"name":{"en":"汉典","zh-CN":"汉典","zh-TW":"漢典"},"options":{"audio":{"en":"Enable audio","zh-CN":"开启发音","zh-TW":"啟用發音"}},"helps":{"audio":{"en":"Referer modification is required, which may slightly impact performance.","zh-CN":"突破外链限制需要改写 Referer，可能会轻微影响性能。","zh-TW":"突破外鏈限制需要改寫 Referer，可能會輕微影響效能。"}}}')},762:function(e,t,n){var r={"./shanbay":131,"./shanbay.ts":131,"./webdav":127,"./webdav.ts":127};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id=762},781:function(e,t,n){var r={"./baidu/engine":1146,"./bing/engine":1180,"./caiyun/engine":1181,"./cambridge/engine":1185,"./cnki/engine":1186,"./cobuild/engine":1187,"./etymonline/engine":1188,"./eudic/engine":1189,"./google/engine":1190,"./googledict/engine":1194,"./guoyu/engine":793,"./hjdict/engine":1195,"./jukuu/engine":1196,"./liangan/engine":1197,"./longman/engine":1198,"./macmillan/engine":1199,"./mojidict/engine":1200,"./naver/engine":1201,"./oald/engine":1202,"./shanbay/engine":1203,"./sogou/engine":1204,"./tencent/engine":1216,"./urban/engine":1217,"./vocabulary/engine":1218,"./weblio/engine":1219,"./weblioejje/engine":1220,"./websterlearner/engine":1221,"./wikipedia/engine":1222,"./youdao/engine":1223,"./youdaotrans/engine":1224,"./zdic/engine":1226};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id=781},788:function(e,t,n){var r={"./en/background":616,"./zh-CN/background":617,"./zh-TW/background":618};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id=788},793:function(e,t,n){"use strict";n.r(t),n.d(t,"getSrcPage",(function(){return i})),n.d(t,"search",(function(){return c})),n.d(t,"moedictSearch",(function(){return l}));var r=n(4),a=n(176),s=n(147),o=n.n(s);const i=e=>"https://www.moedict.tw/".concat(Object(a.b)(e)),c=(e,t,n,r)=>l("a",e,t);function l(e,t,n){return o.a.get("https://www.moedict.tw/".concat(e,"/").concat(encodeURIComponent(Object(a.b)(t.replace(/\s+/g,""))),".json")).catch(r.g).then(e=>{let{data:t}=e;if(!t||!t.h)return Object(r.h)();const n={result:t};return t.h.forEach(e=>{e["="]&&(e["="]="https://203146b5091e8f0aafda-15d41c68795720c6e932125f5ace0c70.ssl.cf1.rackcdn.com/".concat(e["="],".ogg")),n.audio||(n.audio={py:e["="]})}),n})}},81:function(e,t,n){"use strict";n.d(t,"h",(function(){return u})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"g",(function(){return w})),n.d(t,"c",(function(){return m}));var r=n(3),a=n(134),s=n(108),o=n(75),i=n(11),c=n(23),l=n(90);async function u(e,t){let{syncConfig:n}=await r.c.sync.get("syncConfig");n||(n={}),n[e]=t,await r.c.sync.set({syncConfig:n})}async function h(e){const{syncConfig:t}=await r.c.sync.get("syncConfig");if(void 0!==t)return t[e]}async function d(e){e?await u(e,null):await r.c.sync.remove("syncConfig")}function p(e){return Object(s.a)(Object(o.a)(h(e)),r.c.sync.createStream("syncConfig").pipe(Object(i.a)(t=>{let{newValue:n}=t;return n&&n[e]}))).pipe(Object(c.a)(e=>void 0!==e),Object(l.a)((e,t)=>e===t||null!=e&&null!=t&&Object.keys(t).every(n=>t[n]===e[n])))}async function f(e,t){await Object(a.i)(e,JSON.stringify(t))}async function g(e){const t=await Object(a.c)(e);if(t)return JSON.parse(t)}async function w(e){await Object(a.h)({area:"notebook",words:e})}async function m(){return(await Object(a.d)({area:"notebook"})).words||[]}},877:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=browser.runtime.id!==atob("Y2Rvbm5tZmZrZGFvYWpma25vZWVlY21jaGlicG1rbWc=")&&browser.runtime.id!==atob("c2FsYWRpY3RAY3JpbXguY29t")},878:function(e,t,n){"use strict";function r(){return fetch("https://api.github.com/repos/crimx/ext-saladict/releases/latest").then(e=>e.json()).then(e=>{if(e&&e.tag_name){let t=/\d+\.\d+\.\d+/.exec(e.tag_name);if(!t)return{isAvailable:!1};let n=t[0].split(".").map(e=>Number(e)),r=browser.runtime.getManifest().version.split(".").map(e=>Number(e));return{info:e,isAvailable:n[0]!==r[0]?n[0]>r[0]:n[1]!==r[1]?n[1]>r[1]:n[2]>r[2]}}return{isAvailable:!1}}).catch(()=>(console.warn("version check failed"),{isAvailable:!1}))}n.d(t,"a",(function(){return r}))},880:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(60);function a(e){return Object(r.a)([s(e),o(e)]).catch(()=>[])}function s(t){return fetch("http://dict-mobile.iciba.com/interface/index.php?c=word&m=getsuggest&nums=10&client=6&uid=0&is_need_mean=1&word="+encodeURIComponent(t)).then(e=>e.json()).then(n=>{if(n&&Array.isArray(n.message))return n.message.filter(e=>e&&e.key).map(e=>({entry:e.key,explain:Array.isArray(e.means)&&e.means.length>0?e.means[0].part+" "+e.means[0].means.join(" "):""}));throw e.env.DEV_BUILD&&console.warn("fetch suggests failed",t,n),new Error})}function o(t){return fetch("https://dict.youdao.com/suggest?doctype=json&le=en&ver=2.0&q="+encodeURIComponent(t)).then(e=>e.json()).then(n=>{if(n&&n.data&&Array.isArray(n.data.entries))return n.data.entries.filter(e=>e&&e.explain&&e.entry);throw e.env.DEV_BUILD&&console.warn("fetch suggests failed",t,n),new Error})}}).call(this,n(59))},881:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(158),a=n(603),s=r.__importDefault(n(782)),o=r.__importDefault(n(1177)),i=[["auto","auto"],["zh-CN","zh"],["en","en"],["yue","yue"],["wyw","wyw"],["ja","jp"],["ko","kor"],["fr","fra"],["es","spa"],["th","th"],["ar","ara"],["ru","ru"],["pt","pt"],["de","de"],["it","it"],["el","el"],["nl","nl"],["pl","pl"],["bg","bul"],["et","est"],["da","dan"],["fi","fin"],["cs","cs"],["ro","rom"],["sl","slo"],["sv","swe"],["hu","hu"],["zh-TW","cht"],["vi","vie"]];class c extends a.Translator{constructor(){super(...arguments),this.name="baidu",this.endpoint="http://api.fanyi.baidu.com/api/trans/vip/translate",this.appid="20151211000007653",this.key="IFJB6jBORFuMmVGDRude"}async query(e,t,n,r){const o=Date.now(),{endpoint:i,appid:l,key:u}=this,h=await this.request(i,{params:{from:c.langMap.get(t),to:c.langMap.get(n),q:e,salt:o,appid:l,sign:s.default(l+e+o+u)}}).catch(()=>{throw new a.TranslateError("NETWORK_ERROR")}),{data:d}=h;if(d.error_code)throw console.error(new Error("[Baidu service]"+d.error_msg)),new a.TranslateError("API_SERVER_ERROR");const{trans_result:p,from:f}=d;return{text:e,from:f,to:n,origin:{paragraphs:p.map(({src:e})=>e),tts:await this.textToSpeech(e,f)},trans:{paragraphs:p.map(({dst:e})=>e),tts:await this.textToSpeech(p[0].dst,n)}}}async textToSpeech(e,t){return`http://tts.baidu.com/text2audio?${o.default.stringify({lan:c.langMap.get("auto"!==t?t:"zh-CN")||"zh",ie:"UTF-8",spd:5,text:e})}`}getSupportLanguages(){return[...c.langMap.keys()]}}t.Baidu=c,c.langMap=new Map(i),c.langMapReverse=new Map(i.map(([e,t])=>[t,e])),t.default=c},882:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(158),a=n(603),s=r.__importDefault(n(1182)),o=[["auto","auto"],["zh-CN","zh"],["en","en"],["ja","ja"]];class i extends a.Translator{constructor(){super(...arguments),this.token="ukiw3nrioeilf0mlpam7",this.name="caiyun"}getSupportLanguages(){return[...i.langMap.keys()]}async textToSpeech(e,t){return`http://tts.baidu.com/text2audio?${s.default.stringify({lan:i.langMap.get("auto"!==t?t:"zh-CN")||"zh",ie:"UTF-8",spd:5,text:e})}`}async query(e,t,n,r){const s="auto"===t,o=e.split(/\n+/),c=await this.request("https://api.interpreter.caiyunai.com/v1/translator",{headers:{"content-type":"application/json","x-authorization":"token "+(r.token||this.token)},method:"POST",data:JSON.stringify({source:o,trans_type:`${i.langMap.get(t)}2${i.langMap.get(n)}`,detect:s})}).catch(()=>{});if(!c||!c.data)throw new a.TranslateError("NETWORK_ERROR");const l=c.data;return{text:e,from:s?await this.detect(e):t,to:n,origin:{paragraphs:o,tts:await this.textToSpeech(e,t)},trans:{paragraphs:l.target,tts:await this.textToSpeech(l.target.join(" "),n)}}}}t.Caiyun=i,i.langMap=new Map(o),i.langMapReverse=new Map(o.map(([e,t])=>[t,e])),t.default=i},883:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(158),a=n(603),s=n(1191),o=r.__importDefault(n(785)),i=[["auto","auto"],["zh-CN","zh-CN"],["zh-TW","zh-TW"],["en","en"],["af","af"],["am","am"],["ar","ar"],["az","az"],["be","be"],["bg","bg"],["bn","bn"],["bs","bs"],["ca","ca"],["ceb","ceb"],["co","co"],["cs","cs"],["cy","cy"],["da","da"],["de","de"],["el","el"],["eo","eo"],["es","es"],["et","et"],["eu","eu"],["fa","fa"],["fi","fi"],["fr","fr"],["fy","fy"],["ga","ga"],["gd","gd"],["gl","gl"],["gu","gu"],["ha","ha"],["haw","haw"],["he","he"],["hi","hi"],["hmn","hmn"],["hr","hr"],["ht","ht"],["hu","hu"],["hy","hy"],["id","id"],["ig","ig"],["is","is"],["it","it"],["ja","ja"],["jw","jw"],["ka","ka"],["kk","kk"],["km","km"],["kn","kn"],["ko","ko"],["ku","ku"],["ky","ky"],["la","la"],["lb","lb"],["lo","lo"],["lt","lt"],["lv","lv"],["mg","mg"],["mi","mi"],["mk","mk"],["ml","ml"],["mn","mn"],["mr","mr"],["ms","ms"],["mt","mt"],["my","my"],["ne","ne"],["nl","nl"],["no","no"],["ny","ny"],["pa","pa"],["pl","pl"],["ps","ps"],["pt","pt"],["ro","ro"],["ru","ru"],["sd","sd"],["si","si"],["sk","sk"],["sl","sl"],["sm","sm"],["sn","sn"],["so","so"],["sq","sq"],["sr","sr"],["st","st"],["su","su"],["sv","sv"],["sw","sw"],["ta","ta"],["te","te"],["tg","tg"],["th","th"],["fil","tl"],["tr","tr"],["uk","uk"],["ur","ur"],["uz","uz"],["vi","vi"],["xh","xh"],["yi","yi"],["yo","yo"],["zu","zu"]];class c extends a.Translator{constructor(){super(...arguments),this.token={date:0},this.config={token:"",order:["cn","com"],concurrent:!0,apiAsFallback:!0},this.name="google"}async fetchPlainText(e,t={}){const{data:n}=await this.axios(e,{withCredentials:!1,...t,transformResponse:[e=>e],responseType:"text"});return n}async fetchWithToken(e,t,n,r){if(!this.token.value)throw new Error("API_SERVER_ERROR");const{data:a}=await this.axios.get(`${e}/translate_a/single?`+o.default.stringify({client:"webapp",sl:n,tl:r,hl:"en",dt:["at","bd","ex","ld","md","qca","rw","rm","ss","t"],source:"bh",ssel:"0",tsel:"0",kc:"1",tk:s.getTK(t,this.token.value.tk1,this.token.value.tk2),q:t},{indices:!1}));return{base:e,data:a}}async fetchWithoutToken(e,t,n){const{data:r}=await this.axios.get("https://translate.googleapis.com/translate_a/single?"+o.default.stringify({client:"gtx",dt:"t",sl:t,tl:n,q:e}));return{base:"https://translate.google.cn",data:r}}async query(e,t,n,r){if(Date.now()-this.token.date>3e5)try{await this.updateToken(r)}catch(e){}let a=await s.fetchScheduled(r.order.map(r=>()=>"api"===r?this.fetchWithoutToken(e,t,n):this.fetchWithToken(`https://translate.google.${r}`,e,t,n)),r.concurrent).catch(()=>{});if(!a&&r.apiAsFallback&&(a=await this.fetchWithoutToken(e,t,n)),!a)throw new Error("NETWORK_ERROR");if(!a.data[0]||a.data[0].length<=0)throw new Error("API_SERVER_ERROR");const o=a.data[0].map(e=>e[0]).filter(Boolean).join(" ");return{text:e,from:c.langMapReverse.get(a.data[2])||"auto",to:n,origin:{paragraphs:e.split(/\n+/),tts:await this.textToSpeech(e,t,{base:a.base,token:this.token.value})||""},trans:{paragraphs:o.split(/(\n ?)+/),tts:await this.textToSpeech(o,n,{base:a.base,token:this.token.value})||""}}}async updateToken(e=this.config){const t=await s.fetchScheduled(e.order.map(e=>()=>"api"===e?Promise.reject():this.fetchPlainText(`https://translate.google.${e}`)),e.concurrent);if(!t)throw new Error("API_SERVER_ERROR");const n=t.match(/TKK[=:]['"](\d+?)\.(\d+?)['"]/i);if(n)this.token.value={tk1:Number(n[1]),tk2:Number(n[2])},this.token.date=Date.now();else{const e=(t.match(/TKK=(.*?)\(\)\)'\);/i)||[""])[0].replace(/\\x([0-9A-Fa-f]{2})/g,"").match(/[+-]?\d+/g);e&&(this.token.value={tk1:Number(e[2]),tk2:Number(e[0])+Number(e[1])},this.token.date=Date.now())}}getSupportLanguages(){return[...c.langMap.keys()]}async detect(e){try{return(await this.translate(e,"auto","zh-CN")).from}catch(e){return"auto"}}async textToSpeech(e,t,n){return n&&n.token?`${n.base}/translate_tts?ie=UTF-8&total=1&idx=0&client=t&`+o.default.stringify({q:e,tl:c.langMapReverse.get(t)||"en",tk:s.getTK(e,n.token.tk1,n.token.tk2)}):null}}t.Google=c,c.langMap=new Map(i),c.langMapReverse=new Map(i.map(([e,t])=>[t,e])),t.default=c},884:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(158),a=n(1205),s=r.__importDefault(n(1212)),o=r.__importDefault(n(782)),i=n(1215),c="Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36",l=[["auto","auto"],["zh-CN","zh-CHS"],["zh-TW","zh-CHT"],["en","en"],["af","af"],["ar","ar"],["bg","bg"],["bn","bn"],["bs","bs-Latn"],["ca","ca"],["cs","cs"],["cy","cy"],["da","da"],["de","de"],["el","el"],["es","es"],["et","et"],["fa","fa"],["fi","fi"],["fil","fil"],["fj","fj"],["fr","fr"],["he","he"],["hi","hi"],["hr","hr"],["ht","ht"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["mg","mg"],["ms","ms"],["mt","mt"],["mww","mww"],["nl","nl"],["no","no"],["otq","otq"],["pl","pl"],["pt","pt"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sm","sm"],["sr-Cyrl","sr-Cyrl"],["sr-Latn","sr-Latn"],["sv","sv"],["sw","sw"],["th","th"],["tlh","tlh"],["tlh-Qaak","tlh-Qaak"],["to","to"],["tr","tr"],["ty","ty"],["uk","uk"],["ur","ur"],["vi","vi"],["yua","yua"],["yue","yue"]];class u extends a.Translator{constructor(){super(...arguments),this.token={value:i.seccode,date:0},this.cookie="",this.name="sogou"}static getUUID(){let e="";for(let t=0;t<32;t++){8!==t&&12!==t&&16!==t&&20!==t||(e+="-");const n=16*Math.random()|0;e+=(12===t?4:16===t?3&n|8:n).toString(16)}return e}async updateToken(){let e;try{const{data:t}=await this.request("https://fanyi.sogou.com/logtrace",{headers:{Referer:"https://fanyi.sogou.com",Origin:"https://fanyi.sogou.com","User-Agent":c,Cookie:this.cookie},transformResponse:[e=>e],responseType:"text"});if(t){const n=/window\.seccode=(\d+)/.exec(t);n&&(e=n[1])}}catch(e){}if(!e)try{const{data:t}=await this.request("https://raw.githubusercontent.com/OpenTranslate/OpenTranslate/master/packages/service-sogou/src/seccode.json");t&&t.seccode&&(e=t.seccode)}catch(e){}e&&(this.token.value=e,this.token.date=Date.now())}async getToken(){return Date.now()-this.token.date>36e5&&await this.updateToken(),this.token.value}async query(e,t,n,r){if(!this.cookie){const{headers:e}=await this.request("https://fanyi.sogou.com",{headers:{Referer:"https://fanyi.sogou.com",Origin:"https://fanyi.sogou.com","User-Agent":c}}),t=e["set-cookie"];if(t){const e=t.map(e=>(/^[^;]+/.exec(e)||[""])[0]);this.cookie=[...e,`SUV=${Date.now()}`,"SELECTION_SWITCH=1","HISTORY_SWITCH=1","sct=1"].join("; ")}}const i=await this.request("https://fanyi.sogou.com/reventondc/translateV2",{method:"post",headers:{"Accept-Language":"zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest",Referer:"https://fanyi.sogou.com",Origin:"https://fanyi.sogou.com","User-Agent":c,Cookie:this.cookie},data:s.default.stringify({from:u.langMap.get(t),to:u.langMap.get(n),text:e,client:"pc",fr:"browser_pc",pid:"sogou-dict-vr",dict:"true",word_group:"true",second_query:"true",uuid:u.getUUID(),needQc:"1",s:o.default(""+u.langMap.get(t)+u.langMap.get(n)+e+(r.key||await this.getToken()))})}).catch(()=>{});if(!i||!i.data||!i.data.data)throw new a.TranslateError("NETWORK_ERROR");const{translate:l}=i.data.data;if(!l||"0"!==l.errorCode)throw new a.TranslateError("API_SERVER_ERROR");return{text:e,from:u.langMapReverse.get(l.from)||"auto",to:n,origin:{paragraphs:l.text.split(/\n+/),tts:await this.textToSpeech(l.text,t)||""},trans:{paragraphs:l.dit.split(/\n+/),tts:await this.textToSpeech(l.dit,n)||""}}}getSupportLanguages(){return[...u.langMap.keys()]}async detect(e){return(await this.translate(e,"auto","en")).from}async textToSpeech(e,t){return"zh-TW"===t?`https://fanyi.sogou.com/reventondc/microsoftGetSpeakFile?${s.default.stringify({text:e,spokenDialect:"zh-CHT",from:"translateweb"})}`:`https://fanyi.sogou.com/reventondc/synthesis?${s.default.stringify({text:e,speed:"1",lang:u.langMap.get(t)||"en",from:"translateweb"})}`}}t.Sogou=u,u.langMap=new Map(l),u.langMapReverse=new Map(l.map(([e,t])=>[t,e])),t.default=u},885:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(158),a=n(603),s=r.__importDefault(n(785)),o=[["auto","auto"],["zh-CN","zh"],["zh-TW","zh-TW"],["en","en"],["ko","kr"],["ja","jp"],["de","de"],["fr","fr"],["es","es"],["it","it"],["tr","tr"],["ru","ru"],["pt","pt"],["vi","vi"],["id","id"],["ms","ms"],["th","th"]],i={qtv:"1f287950babc6f41",qtk:"7ZL+2Pxljmav9j1z8Q7RuhmVeN5nkYZrLJH0kfWZ8rin6SYxcu62TsMramShwVod/uNYNIKWAu7I4x09lVkCEou4pIVE5E1GuDDrHuNjLUHQCSPssTaFUOOiIomtcwFYQAxap7Kp9beMz+rxnUL9pg==",date:0};class c extends a.Translator{constructor(){super(...arguments),this.token={...i},this.name="tencent"}async updateToken(){const e={...i};try{const t=(await this.request("https://fanyi.qq.com")).data,n=t.match(/"qtv=([^"]+)/);n&&(e.qtv=n[1]);const r=t.match(/"qtk=([^"]+)/);r&&(e.qtk=r[1])}catch(e){}this.token={...e,date:Date.now()}}async getToken(){return Date.now()-this.token.date>36e4&&await this.updateToken(),this.token}async query(e,t,n,r){const{qtv:o,qtk:i}=await this.getToken(),l=s.default.stringify({source:c.langMap.get(t),target:c.langMap.get(n),sourceText:e,qtv:o,qtk:i,sessionUuid:`translate_uuid${Date.now()}`}),u=await this.request("https://fanyi.qq.com/api/translate",{method:"post",withCredentials:!1,headers:{Origin:"https://fanyi.qq.com",Accept:"application/json, text/javascript, */*; q=0.01","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},data:l});if(!u||!u.data)throw new a.TranslateError("NETWORK_ERROR");const h=u.data,d=h.translate.records.map(e=>e.targetText),p=h.translate.records.map(e=>e.sourceText);return{text:e,from:c.langMapReverse.get(h.translate.source)||("auto"!==t?t:await this.detect(e)),to:n,origin:{paragraphs:p,tts:await this.textToSpeech(p.join("\n"),c.langMapReverse.get(h.translate.source)||t)},trans:{paragraphs:d,tts:await this.textToSpeech(d.join("\n"),c.langMapReverse.get(h.translate.target)||n)}}}getSupportLanguages(){return[...c.langMap.keys()]}async textToSpeech(e,t){return`https://fanyi.qq.com/api/tts?${s.default.stringify({lang:c.langMap.get("auto"!==t?t:"zh-CN")||"zh",text:e})}`}}t.Tencent=c,c.langMap=new Map(o),c.langMapReverse=new Map(o.map(([e,t])=>[t,e])),t.default=c},886:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(158),a=n(603),s=r.__importDefault(n(785)),o=r.__importDefault(n(1225)),i=[["auto","AUTO"],["en","en"],["ru","ru"],["pt","pt"],["es","es"],["zh-CN","zh-CHS"],["ja","ja"],["ko","ko"],["fr","fr"]],c="http://fanyi.youdao.com",l=c+"/translate_o?smartresult=dict&smartresult=rule";class u extends a.Translator{constructor(){super(...arguments),this.name="youdao",this.token="n%A-rKaT5fb[Gy?;N5@Tj",this.tokenUpdateTamp=0}async query(e,t,n,r){if(("auto"!==t||"auto"!==n)&&"zh-CN"!==t&&"zh-CN"!==n)throw new a.TranslateError("UNSUPPORTED_LANG");return e=e.slice(0,5e3),this.transformRaw((await this.request(l,{method:"post",data:s.default.stringify({i:e,from:u.langMap.get(t),to:u.langMap.get(n),smartresult:"dict",doctype:"json",version:"2.1",keyfrom:"fanyi.web",action:"FY_BY_REALTIME",typoResult:"false",...o.default(e,await this.getToken())}),headers:{"Content-Type":"application/x-www-form-urlencoded",Referer:c,Cookie:"OUTFOX_SEARCH_USER_ID=-1799202939@10.168.8.64"}})).data,e)}async transformRaw(e,t){if(0!==e.errorCode)throw new a.TranslateError("API_SERVER_ERROR");const[n,r]=e.type.split("2"),s=u.langMapReverse.get(n)||"auto",o=u.langMapReverse.get(r)||"auto",i=e.translateResult.map(e=>e.map(e=>e.tgt.trim()).join(""));return{text:t,from:s,to:o,origin:{paragraphs:t.split(/\n+/),tts:await this.textToSpeech(t,s)||void 0},trans:{paragraphs:i,tts:await this.textToSpeech(i.join("\n"),o)||void 0}}}getSupportLanguages(){return[...u.langMap.keys()]}async updateToken(){const e=(await this.request("http://fanyi.youdao.com")).data.match(/<script.*?src="([^"]+?\/fanyi\.min\.js)"/);if(!e)return;const t=(await this.request(e[1])).data.match(/sign:n\.md5\("fanyideskweb"+e+i+"([^"]+?)"\)/);t&&(this.token=t[1],this.tokenUpdateTamp=Date.now())}async getToken(){return Date.now()-this.tokenUpdateTamp>36e5&&await this.updateToken(),this.token}async textToSpeech(e,t){const n={en:"eng",ja:"jap",ko:"ko",fr:"fr"}[t];return n?"http://tts.youdao.com/fanyivoice?"+s.default.stringify({word:e,le:n,keyfrom:"speaker-target"}):null}}t.Youdao=u,u.langMap=new Map(i),u.langMapReverse=new Map(i.map(([e,t])=>[t,e])),t.default=u}},[[1144,0,15,1,3]]]);