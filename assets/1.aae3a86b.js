(window.saladictJSONP=window.saladictJSONP||[]).push([[1],{217:function(e,t,n){"use strict";function a(){const e={baidu_page_translate:"x",baidu_search:"https://www.baidu.com/s?ie=utf-8&wd=%s",bing_dict:"https://cn.bing.com/dict/?q=%s",bing_search:"https://www.bing.com/search?q=%s",cambridge:"http://dictionary.cambridge.org/spellcheck/english-chinese-simplified/?q=%s",copy_pdf_url:"x",dictcn:"https://dict.eudic.net/dicts/en/%s",etymonline:"http://www.etymonline.com/index.php?search=%s",google_cn_page_translate:"x",google_page_translate:"x",google_search:"https://www.google.com/#newwindow=1&q=%s",google_translate:"https://translate.google.cn/#auto/zh-CN/%s",guoyu:"https://www.moedict.tw/%s",iciba:"http://www.iciba.com/%s",liangan:"https://www.moedict.tw/~%s",longman_business:"http://www.ldoceonline.com/search/?q=%s",merriam_webster:"http://www.merriam-webster.com/dictionary/%s",microsoft_page_translate:"x",oxford:"http://www.oxforddictionaries.com/us/definition/english/%s",saladict:"x",sogou_page_translate:"x",sogou:"https://fanyi.sogou.com/#auto/zh-CHS/%s",view_as_pdf:"x",youdao_page_translate:"x",youdao:"http://dict.youdao.com/w/%s",youglish:"https://youglish.com/search/%s"};return e}n.d(t,"a",(function(){return i}));const r=browser.i18n.getUILanguage()||"en",o=/^zh-CN|zh-TW|en$/.test(r)?"zh-HK"===r?"zh-TW":r:"en",i=function(){return{version:12,active:!0,analytics:!0,noTypeField:!1,animation:!0,langCode:o,panelWidth:450,panelMaxHeightRatio:80,bowlOffsetX:15,bowlOffsetY:-45,darkMode:!1,panelCSS:"",fontSize:13,pdfSniff:!1,pdfWhitelist:[],pdfBlacklist:[["^(http|https)://[^/]*?cnki\\.net(/.*)?$","*://*.cnki.net/*"],["^(http|https)://[^/]*?googleusercontent\\.com(/.*)?$","*://*.googleusercontent.com/*"]],searhHistory:!1,searhHistoryInco:!1,editOnFav:!0,searchSuggests:!0,touchMode:!1,mode:{icon:!0,direct:!1,double:!1,holding:{shift:!1,ctrl:!1,meta:!1},instant:{enable:!1,key:"alt",delay:600}},pinMode:{direct:!0,double:!1,holding:{shift:!1,ctrl:!1,meta:!1},instant:{enable:!1,key:"alt",delay:600}},panelMode:{direct:!1,double:!1,holding:{shift:!1,ctrl:!1,meta:!1},instant:{enable:!1,key:"alt",delay:600}},qsPanelMode:{direct:!1,double:!1,holding:{shift:!1,ctrl:!0,meta:!1},instant:{enable:!1,key:"alt",delay:600}},bowlHover:!0,doubleClickDelay:450,tripleCtrl:!0,tripleCtrlPreload:"clipboard",tripleCtrlAuto:!1,tripleCtrlLocation:"CENTER",tripleCtrlStandalone:!0,tripleCtrlHeight:600,tripleCtrlSidebar:"",tripleCtrlPageSel:!0,baPreload:"clipboard",baAuto:!1,baOpen:"popup_panel",ctxTrans:{google:!0,sogou:!0,youdaotrans:!0,baidu:!0,tencent:!1,caiyun:!1},language:{chinese:!0,english:!0,japanese:!0,korean:!0,french:!0,spanish:!0,deutsch:!0,others:!1,matchAll:!1},autopron:{cn:{dict:"",list:["zdic","guoyu"]},en:{dict:"",list:["bing","cambridge","cobuild","eudic","longman","macmillan","oald","urban","websterlearner","youdao"],accent:"uk"},machine:{dict:"",list:["google","sogou","tencent","baidu","caiyun"],src:"trans"}},whitelist:[],blacklist:[["^https://stackedit\\.io(/.*)?$","https://stackedit.io/*"],["^https://docs\\.google\\.com(/.*)?$","https://docs.google.com/*"]],contextMenus:{selected:["view_as_pdf","google_translate","google_search","google_page_translate","youdao_page_translate"],all:a()}}}},28:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"i",(function(){return g})),n.d(t,"b",(function(){return w})),n.d(t,"j",(function(){return _})),n.d(t,"a",(function(){return y}));var a=n(107);const r=["chinese","english","japanese","korean","french","spanish","deutsch"],o={chinese:/[\u4e00-\u9fa5]/,english:/[a-zA-Z]/,japanese:/[\u3041-\u3096\u30A0-\u30FF]/,korean:/[\u3131-\u4dff\u9fa6-\uD79D]/,french:/[\u00e0\u00e2\u00e4\u00e8\u00e9\u00ea\u00eb\u00ee\u00ef\u00f4\u0153\u00f9\u00fb\u00fc\u00ff\u00e7]/i,spanish:/[\u00e1\u00e9\u00ed\u00f3\u00fa\u00f1\u00fc\u00a1\u00bf]/i,deutsch:/[\u00E4\u00F6\u00FC\u00C4\u00D6\u00DC\u00df]/i},i=e=>o.chinese.test(e),c=e=>o.english.test(e),s=e=>o.japanese.test(e),l=e=>o.korean.test(e),u=e=>o.french.test(e),d=e=>o.deutsch.test(e),g=e=>o.spanish.test(e),f={chinese:Object(a.a)(i),english:Object(a.a)(c),japanese:Object(a.a)(s),korean:Object(a.a)(l),french:Object(a.a)(u),spanish:Object(a.a)(g),deutsch:Object(a.a)(d)},h=/[/[\]{}$^*+|?.\-~!@#%&()_='";:><,。？！，、；：“”﹃﹄「」﹁﹂‘’『』（）—［］〔〕【】…－～·‧《》〈〉﹏＿]/,p=new RegExp("^(\\d|\\s|".concat(h.source,")+$")),b=new RegExp("".concat(o.chinese.source,"|").concat(o.japanese.source,"|").concat(o.korean.source)),w=Object(a.a)(e=>(e.replace(new RegExp(h,"g")," ").replace(new RegExp(b,"g")," x ").match(/\S+/g)||"").length),_=[...r,"others","matchAll"];function y(e,t){if(!t)return!1;if(e.matchAll){if(p.test(t))return!1;if(e.others){let n=[/-|\.|\d|\s/],a=[];for(let t=r.length-1;t>=0;t--){const i=r[t];e[i]?n.push(o[i]):a.push(o[i])}for(let e=0;e<t.length;e++)if(n.every(n=>!n.test(t[e]))&&a.some(n=>n.test(t[e])))return!1;return!0}{const n=r.filter(t=>e[t]).map(e=>o[e]);n.push(/-|\.|\d|\s/);for(let e=t.length-1;e>=0;e--)if(n.every(n=>!n.test(t[e])))return!1;return!0}}{if(r.some(n=>e[n]&&f[n](t)))return!0;if(!e.others||p.test(t))return!1;const n=r.filter(t=>!e[t]).map(e=>o[e]);n.push(new RegExp("".concat(h.source,"|\\d|\\s")));for(let e=t.length-1;e>=0;e--)if(n.every(n=>!n.test(t[e])))return!0;return!1}}},3:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return g}));var a=n(153),r=n(23),o=n(11);const i=()=>{},c=new WeakMap,s=new WeakMap,l=new WeakMap,u={sync:{clear:f,remove:h,get:p,set:b,addListener:w,removeListener:_,createStream:y,get __storageArea__(){return"sync"}},local:{clear:f,remove:h,get:p,set:b,addListener:w,removeListener:_,createStream:y,get __storageArea__(){return"local"}},clear:f,addListener:w,removeListener:_,createStream:y,get __storageArea__(){return"all"}},d={send:m,addListener:O,removeListener:v,createStream:j,get __self__(){return!1},self:{initClient:k,initServer:function(){window.pageId="background page";const e=/^\[\[(.+)\]\]$/;browser.runtime.onMessage.addListener((t,n)=>{if(!t||!t.type)return;if("PAGE_INFO"===t.type)return Promise.resolve(function(e){const t={pageId:"",faviconURL:"",pageTitle:"",pageURL:""},n=e.tab;n?(t.pageId=n.id||"",n.favIconUrl&&(t.faviconURL=n.favIconUrl),n.url&&(t.pageURL=n.url),n.title&&(t.pageTitle=n.title)):(t.pageId="popup",e.url&&!e.url.startsWith("http")&&(t.faviconURL="https://saladict.crimx.com/favicon.ico"));return t}(n));const a=e.exec(t.type);if(a){t.type=a[1];const e=n.tab&&n.tab.id;return e?m(e,t):m(t)}})},send:async function(t){void 0===window.pageId&&await k();return browser.runtime.sendMessage(Object.assign({},t,{__pageId__:window.pageId,type:"[[".concat(t.type,"]]")})).catch(n=>{e.env.DEV_BUILD&&console.warn(n,t)})},addListener:O,removeListener:v,createStream:j,get __self__(){return!0}}};async function g(e,t){t&&(e=browser.runtime.getURL(e));const n=await browser.tabs.query({url:e});if(n.length>0){const{index:e,windowId:t}=n[0];"function"==typeof browser.tabs.highlight&&await browser.tabs.highlight({tabs:e,windowId:t}),await browser.windows.update(t,{focused:!0})}else await browser.tabs.create({url:e})}function f(){return"all"===this.__storageArea__?Promise.all([browser.storage.local.clear(),browser.storage.sync.clear()]).then(i):browser.storage[this.__storageArea__].clear()}function h(e){return browser.storage[this.__storageArea__].remove(e)}function p(){return browser.storage[this.__storageArea__].get(...arguments)}function b(e){return browser.storage[this.__storageArea__].set(e)}function w(){let e,t;if("function"==typeof(arguments.length<=0?void 0:arguments[0]))e="",t=arguments.length<=0?void 0:arguments[0];else{if("string"!=typeof(arguments.length<=0?void 0:arguments[0])||"function"!=typeof(arguments.length<=1?void 0:arguments[1]))throw new Error("wrong arguments type");e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1]}let n=l.get(t);n||(n=new Map,l.set(t,n));const a=this.__storageArea__+e;let r=n.get(a);return r||(r=(n,a)=>{"all"!==this.__storageArea__&&a!==this.__storageArea__||e&&!(e in n)||t(n,a)},n.set(a,r)),browser.storage.onChanged.addListener(r)}function _(){let e,t;if("function"==typeof(arguments.length<=0?void 0:arguments[0]))e="",t=arguments.length<=0?void 0:arguments[0];else{if("string"!=typeof(arguments.length<=0?void 0:arguments[0])||"function"!=typeof(arguments.length<=1?void 0:arguments[1]))throw new Error("wrong arguments type");e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1]}const n=l.get(t);if(n){if(!e)return n.forEach(e=>{browser.storage.onChanged.removeListener(e)}),void l.delete(t);{const a=this.__storageArea__+e,r=n.get(a);if(r)return browser.storage.onChanged.removeListener(r),n.delete(a),void(n.size<=0&&l.delete(t))}}browser.storage.onChanged.removeListener(t)}function y(e){if(!e)throw new Error("Missing key");return Object(a.a)(t=>this.addListener(e,t),t=>this.removeListener(e,t)).pipe(Object(r.a)(t=>(Array.isArray(t)?t[0]:t).hasOwnProperty(e)),Object(o.a)(t=>Array.isArray(t)?t[0][e]:t[e]))}function m(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(1===n.length?browser.runtime.sendMessage(n[0]):browser.tabs.sendMessage(n[0],n[1])).catch(t=>{e.env.DEV_BUILD&&console.warn(t,...n)})}function O(){void 0===window.pageId&&k();const e=this.__self__?s:c,t=1===arguments.length?void 0:arguments.length<=0?void 0:arguments[0],n=1===arguments.length?arguments.length<=0?void 0:arguments[0]:arguments.length<=1?void 0:arguments[1];let a=e.get(n);a||(a=new Map,e.set(n,a));let r=a.get(t||"__DEFAULT_MSGTYPE__");return r||(r=(e,a)=>{if(e&&(this.__self__?window.pageId===e.__pageId__:!e.__pageId__)&&(null==t||e.type===t))return n(e,a)},a.set(t||"__DEFAULT_MSGTYPE__",r)),browser.runtime.onMessage.addListener(r)}function v(){const e=this.__self__?s:c,t=1===arguments.length?void 0:arguments.length<=0?void 0:arguments[0],n=1===arguments.length?arguments.length<=0?void 0:arguments[0]:arguments.length<=1?void 0:arguments[1],a=e.get(n);if(a){if(!t)return a.forEach(e=>browser.runtime.onMessage.removeListener(e)),void e.delete(n);{const r=a.get(t);if(r)return browser.runtime.onMessage.removeListener(r),a.delete(t),void(a.size<=0&&e.delete(n))}}browser.runtime.onMessage.removeListener(n)}function j(e){return(e?Object(a.a)(t=>this.addListener(e,t),t=>this.removeListener(e,t)):Object(a.a)(e=>this.addListener(e),e=>this.removeListener(e))).pipe(Object(o.a)(e=>Array.isArray(e)?e[0]:e))}function k(){return void 0===window.pageId?d.send({type:"PAGE_INFO"}).then(e=>{let{pageId:t,faviconURL:n,pageTitle:a,pageURL:r}=e;return window.pageId=t,window.faviconURL=n,a&&(window.pageTitle=a),r&&(window.pageURL=r),t}):Promise.resolve(window.pageId)}}).call(this,n(59))},31:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return _}));var a=n(188),r=n.n(a),o=n(217),i=n(663),c=n(3),s=n(108),l=n(75),u=n(153),d=n(11);function g(e){return e&&1===e.v?JSON.parse(r.a.inflate(e.d,{to:"string"})):e}async function f(){let e=await p();return e=e&&e.version?Object(i.a)(e):Object(o.a)(),await b(e),e}async function h(){const e=Object(o.a)();return await b(e),e}async function p(){const{baseconfig:e}=await c.c.sync.get("baseconfig");return g(e||Object(o.a)())}function b(e){return c.c.sync.set({baseconfig:(t=e,{v:1,d:r.a.deflate(JSON.stringify(t),{to:"string"})})});var t}async function w(e){c.c.sync.addListener(t=>{if(t.baseconfig){const{newValue:n,oldValue:a}=t.baseconfig;n&&e({newConfig:g(n),oldConfig:g(a)})}})}function _(){return Object(s.a)(Object(l.a)(p()),Object(u.a)(w).pipe(Object(d.a)(e=>(Array.isArray(e)?e[0]:e).newConfig)))}},38:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return g}));var a=n(3);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return e?{date:e.date||Date.now(),text:e.text||"",context:e.context||"",title:e.title||"",url:e.url||"",favicon:e.favicon||"",trans:e.trans||"",note:e.note||""}:{date:Date.now(),text:"",context:"",title:"",url:"",favicon:"",trans:"",note:""}}function s(e){return a.a.send({type:"IS_IN_NOTEBOOK",payload:e}).catch((t=!1,e=>t));var t}async function l(e,t){await a.a.send({type:"SAVE_WORD",payload:{area:e,word:t}})}async function u(e,t){await a.a.send({type:"SYNC_SERVICE_DOWNLOAD"}),await a.a.send({type:"DELETE_WORDS",payload:{area:e,dates:t}})}function d(e,t){return a.a.send({type:"GET_WORDS_BY_TEXT",payload:{area:e,text:t}})}function g(e,t){return a.a.send({type:"GET_WORDS",payload:o({area:e},t)})}},578:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var a=n(629),r=n(630),o=n(631),i=n(632),c=n(633),s=n(634),l=n(635),u=n(636),d=n(637),g=n(638),f=n(639),h=n(640),p=n(641),b=n(642),w=n(643),_=n(644),y=n(645),m=n(646),O=n(647),v=n(648),j=n(649),k=n(650),L=n(651),x=n(652),M=n(653),E=n(654),T=n(655),A=n(656),C=n(657),S=n(658),P=n(659);function I(){return{baidu:Object(a.a)(),bing:Object(r.a)(),caiyun:Object(o.a)(),cambridge:Object(i.a)(),cnki:Object(c.a)(),cobuild:Object(s.a)(),etymonline:Object(l.a)(),eudic:Object(u.a)(),google:Object(d.a)(),googledict:Object(g.a)(),guoyu:Object(f.a)(),hjdict:Object(h.a)(),jukuu:Object(p.a)(),liangan:Object(b.a)(),longman:Object(w.a)(),macmillan:Object(_.a)(),mojidict:Object(y.a)(),naver:Object(m.a)(),oald:Object(O.a)(),shanbay:Object(v.a)(),sogou:Object(j.a)(),tencent:Object(k.a)(),urban:Object(L.a)(),vocabulary:Object(x.a)(),weblio:Object(M.a)(),weblioejje:Object(E.a)(),websterlearner:Object(T.a)(),wikipedia:Object(A.a)(),youdao:Object(C.a)(),youdaotrans:Object(S.a)(),zdic:Object(P.a)()}}},663:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n(217),r=n(578),o=n(175),i=n.n(o),c=n(191),s=n.n(c),l=n(192),u=n.n(l),d=n(138),g=n.n(d),f=n(61),h=n.n(f),p=n(86),b=n.n(p);const w=Object(r.a)();function _(e,t){const n=t?JSON.parse(JSON.stringify(t)):Object(a.a)();let r=e.version;return r<=9&&(r=10,["mode","pinMode","panelMode","qsPanelMode"].forEach(t=>{n[t].holding.shift=!1,n[t].holding.ctrl=!!e[t].ctrl,n[t].holding.meta=!!e[t].ctrl,delete e[t].ctrl})),Object.keys(n).forEach(t=>{switch(t){case"langCode":d("langCode",e=>/^(zh-CN|zh-TW|en)$/.test(e));break;case"pdfWhitelist":case"pdfBlacklist":case"whitelist":case"blacklist":d(t,e=>Array.isArray(e));break;case"mode":case"pinMode":case"panelMode":case"qsPanelMode":"mode"===t&&l("mode.icon"),l("".concat(t,".direct")),l("".concat(t,".double")),l("".concat(t,".holding.shift")),l("".concat(t,".holding.ctrl")),l("".concat(t,".holding.meta")),l("".concat(t,".instant.enable")),d("".concat(t,".instant.key"),e=>/^(direct|ctrl|alt|shift)$/.test(e)),o("".concat(t,".instant.delay"));break;case"tripleCtrlPreload":d("tripleCtrlPreload",e=>""===e||"clipboard"===e||"selection"===e);break;case"tripleCtrlLocation":d("tripleCtrlLocation",e=>"CENTER"===e||"TOP"===e||"RIGHT"===e||"BOTTOM"===e||"LEFT"===e||"TOP_LEFT"===e||"TOP_RIGHT"===e||"BOTTOM_LEFT"===e||"BOTTOM_RIGHT"===e);break;case"baPreload":d("baPreload",e=>""===e||"clipboard"===e||"selection"===e);break;case"ctxTrans":i()(n.ctxTrans,(e,t)=>{l("ctxTrans.".concat(t))});break;case"language":i()(n.language,(e,t)=>{l("language.".concat(t))});break;case"autopron":d("autopron.cn.dict",e=>w[e]),d("autopron.en.dict",e=>w[e]),d("autopron.en.accent",e=>"us"===e||"uk"===e),d("autopron.machine.dict",e=>w[e]),d("autopron.machine.src",e=>"trans"===e||"searchText"===e);break;case"contextMenus":i()(e.contextMenus.all,(e,t)=>{"string"==typeof e?n.contextMenus.all[t]&&c("contextMenus.all.".concat(t)):(c("contextMenus.all.".concat(t,".name")),c("contextMenus.all.".concat(t,".url")))}),function(t){const a=h()(e,[t,"selected"]);if(Array.isArray(a))if(0===a.length)b()(n,[t,"selected"],[]);else{const e=h()(n,[t,"all"]),r=a.filter(t=>e[t]);r.length>0&&b()(n,[t,"selected"],r)}}("contextMenus");break;default:switch(typeof n[t]){case"string":c(t);break;case"boolean":l(t);break;case"number":o(t);break;default:console.error(new Error("merge config: missing handler for '".concat(t,"'")))}}}),(r=e.version)<=10&&(r=11,n.contextMenus.selected.unshift("view_as_pdf")),r<=11&&(r=12,n.blacklist.push(["^https://stackedit.io(/.*)?$","https://stackedit.io/*"])),!1===e.language.minor&&(n.language.japanese=!1,n.language.korean=!1,n.language.french=!1,n.language.spanish=!1,n.language.deutsch=!1),n.panelMaxHeightRatio<1&&(n.panelMaxHeightRatio=Math.round(100*n.panelMaxHeightRatio)),n;function o(e){return d(e,s.a)}function c(e){return d(e,u.a)}function l(e){return d(e,g.a)}function d(t,a){const r=h()(e,t);a(r)&&b()(n,t,r)}}}}]);