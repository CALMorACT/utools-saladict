(window.saladictEntry=window.saladictEntry||[]).push([[14],{1276:function(e,t,a){"use strict";a.r(t),window.__SALADICT_INTERNAL_PAGE__=!0,window.__SALADICT_POPUP_PAGE__=!0;a(426);var n=a(0),c=a.n(n),r=a(20),o=a.n(r),l=a(428),s=a(239),i=a(19),h=a(1),p=a(12),d=a(68),m=a(33),u=a(203),v=a(10),E=a(5),w=a.n(E),b=a(900),f=a.n(b),g=a(72),y=a(736);var _=e=>{const{t:t}=Object(v.e)("popup"),[a,r]=Object(n.useState)(e.config),[o,l]=Object(n.useState)(!1),[s,p]=Object(n.useState)(""),[d,m]=Object(n.useState)(30),u=Object(n.useRef)(()=>m(499)).current,E=Object(n.useRef)(()=>m(399)).current,[b,_]=Object(n.useState)("mode"),[O,z]=Object(n.useState)(!1),[M,x]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{u(),Object(i.a)(({newConfig:e})=>{r(e)}),browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{e.length>0&&null!=e[0].id&&(h.a.send(e[0].id,{type:"TEMP_DISABLED_STATE",payload:{op:"get"}}).then(e=>{z(e)}),h.a.send(e[0].id,{type:"QUERY_PIN_STATE"}).then(e=>{_(e?"pinMode":"mode")}))}).catch(e=>console.warn("Error when receiving MsgTempDisabled response",e))},[]),c.a.createElement("div",{className:w()("popup-root",{"dark-mode":a.darkMode})},c.a.createElement(y.a,{width:"100vw",height:d+"px"}),c.a.createElement("div",{className:"switch-container",onMouseEnter:E,onMouseLeave:u},c.a.createElement("div",{className:"active-switch"},c.a.createElement("span",{className:"switch-title"},t("app_temp_active_title")),c.a.createElement("input",{type:"checkbox",id:"opt-temp-active",className:"btn-switch",checked:O,onChange:function(){const e=!O;z(e),browser.tabs.query({active:!0,currentWindow:!0}).then(t=>t.length>0&&null!=t[0].id&&h.a.send(t[0].id,{type:"TEMP_DISABLED_STATE",payload:{op:"set",value:e}})).then(t=>{if(!t)throw z(!e),new Error("Set tempOff failed")}).catch(()=>x(!0))},onFocus:E}),c.a.createElement("label",{htmlFor:"opt-temp-active"})),c.a.createElement("div",{className:"active-switch"},c.a.createElement("span",{className:"switch-title"},t("instant_capture_title")+("pinMode"===b?t("instant_capture_pinned"):"")),c.a.createElement("input",{type:"checkbox",id:"opt-instant-capture",className:"btn-switch",checked:a[b].instant.enable,onChange:function(){Object(i.f)({...a,[b]:{...a[b],instant:{...a[b].instant,enable:!a[b].instant.enable}}})},onFocus:E}),c.a.createElement("label",{htmlFor:"opt-instant-capture"})),c.a.createElement("div",{className:"active-switch"},c.a.createElement("svg",{className:"icon-qrcode",onMouseEnter:async function(){const e=await browser.tabs.query({active:!0,currentWindow:!0});if(e.length>0){const t=e[0].url;if(t){if(!t.startsWith("http")){const e=/pdf\/web\/viewer\.html\?file=(.*)$/.exec(t);if(e)return l(!0),void p(decodeURIComponent(e[1]))}l(!1),p(t)}}},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 612 612"},c.a.createElement("path",{d:"M0 225v25h250v-25H0zM0 25h250V0H0v25z"}),c.a.createElement("path",{d:"M0 250h25V0H0v250zm225 0h25V0h-25v250zM87.5 162.5h75v-75h-75v75zM362 587v25h80v-25h-80zm0-200h80v-25h-80v25z"}),c.a.createElement("path",{d:"M362 612h25V362h-25v250zm190-250v25h60v-25h-60zm-77.5 87.5v25h50v-25h-50z"}),c.a.createElement("path",{d:"M432 497.958v-25h-70v25h70zM474.5 387h50v-25h-50v25zM362 225v25h250v-25H362zm0-200h250V0H362v25z"}),c.a.createElement("path",{d:"M362 250h25V0h-25v250zm225 0h25V0h-25v250zm-137.5-87.5h75v-75h-75v75zM0 587v25h250v-25H0zm0-200h250v-25H0v25z"}),c.a.createElement("path",{d:"M0 612h25V362H0v250zm225 0h25V362h-25v250zM87.5 524.5h75v-75h-75v75zM587 612h25V441h-25v171zM474.5 499.5v25h50v-25h-50z"}),c.a.createElement("path",{d:"M474.5 449.5v75h25v-75h-25zM562 587v25h50v-25h-50z"})),c.a.createElement("span",{className:"switch-title"},t("app_active_title")),c.a.createElement("input",{type:"checkbox",id:"opt-active",className:"btn-switch",checked:a.active,onChange:function(){Object(i.f)({...a,active:!a.active})},onFocus:E}),c.a.createElement("label",{htmlFor:"opt-active"})),c.a.createElement(g.a,{classNames:"fade",in:!!s,timeout:500,exit:!1,mountOnEnter:!0,unmountOnExit:!0},()=>c.a.createElement("div",{className:"qrcode-panel",onMouseLeave:()=>p("")},c.a.createElement(f.a,{value:s,size:250,bgColor:a.darkMode?"#ddd":"#fff",fgColor:"#222"}),c.a.createElement("p",{className:"qrcode-panel-title"},o?c.a.createElement("input",{type:"text",autoFocus:!0,readOnly:!0,value:s,onFocus:e=>e.currentTarget.select()}):c.a.createElement("span",null,t("qrcode_title"))),M&&c.a.createElement("div",{className:"page-no-response-panel"},c.a.createElement("p",{className:"page-no-response-title"},t("page_no_response")))))))};const O={textAlign:"center",margin:"10px 20px",fontSize:14};var z=({word:e,hasError:t})=>{Object(n.useEffect)(()=>{setTimeout(()=>{window.close()},3e3)},[]);const{t:a}=Object(v.e)("popup");return t?function(e){return c.a.createElement("div",{style:O},c.a.createElement("p",null,c.a.createElement("svg",{width:"100",height:"100",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 426.667 426.667"},c.a.createElement("path",{fill:"#f05228",d:"M213.333 0C95.514 0 0 95.514 0 213.333s95.514 213.333 213.333 213.333 213.333-95.514 213.333-213.333S331.153 0 213.333 0zm117.662 276.689l-54.302 54.306-63.36-63.356-63.36 63.36-54.302-54.31 63.356-63.356-63.356-63.36 54.302-54.302 63.36 63.356 63.36-63.356 54.302 54.302-63.356 63.36 63.356 63.356z"}))),c.a.createElement("p",null,e("notebook_error")))}(a):e&&e.text?function(e,t){return c.a.createElement("div",{style:O},c.a.createElement("p",null,c.a.createElement("svg",{width:"100",height:"100",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 426.667 426.667"},c.a.createElement("path",{fill:"#6ac259",d:"M213.333 0C95.518 0 0 95.514 0 213.333s95.518 213.333 213.333 213.333c117.828 0 213.333-95.514 213.333-213.333S331.157 0 213.333 0zm-39.134 322.918l-93.935-93.931 31.309-31.309 62.626 62.622 140.894-140.898 31.309 31.309-172.203 172.207z"}))),c.a.createElement("p",null,e("notebook_added")," 「",t.text,"」"))}(a,e):function(e){return c.a.createElement("div",{style:O},c.a.createElement("p",null,c.a.createElement("svg",{width:"100",height:"100",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 426.667 426.667"},c.a.createElement("g",{fill:"#fac917"},c.a.createElement("path",{d:"M213.338 0C95.509 0 0 95.497 0 213.325c0 117.854 95.509 213.342 213.338 213.342 117.82 0 213.329-95.488 213.329-213.342C426.667 95.497 331.157 0 213.338 0zm-.005 99.49c14.793 0 26.786 11.994 26.786 26.786s-11.998 26.782-26.786 26.782-26.786-11.994-26.786-26.782c0-14.792 11.994-26.786 26.786-26.786zm46.874 227.691H166.46v-40.183h20.087V206.64H166.46v-40.18h73.664v120.537h20.087v40.183h-.004z"}),c.a.createElement("path",{d:"M325.935 394.449l93.615 25.08-25.084-93.611z"})))),c.a.createElement("p",null,e("notebook_empty")))}(a)};a(973);browser.runtime.connect({name:"popup"});const M=()=>{const{t:e}=Object(v.e)("popup");return c.a.createElement(l.a,null,c.a.createElement("title",null,e("title")))};Object(i.c)().then(e=>{switch(document.body.style.width=e.panelWidth+"px",e.baOpen){case"popup_panel":!async function(e){e.analytics&&Object(s.a)("/popup");const t=Object(u.a)();o.a.render(c.a.createElement(v.b,null,c.a.createElement(M,null),c.a.createElement(m.a,{store:t},c.a.createElement(_,{config:e}))),document.getElementById("root"))}(e);break;case"popup_fav":!async function(){let e,t=!1;const a=(await browser.tabs.query({active:!0,currentWindow:!0}))[0];if(a&&a.id){try{e=await h.a.send(a.id,{type:"PRELOAD_SELECTION"})}catch(e){t=!0}if(e&&e.text)try{await Object(p.f)("notebook",e)}catch(e){t=!0}}else t=!0;if(o.a.render(c.a.createElement(v.b,null,c.a.createElement(z,{word:e,hasError:t})),document.getElementById("root")),e&&e.context){const t=await Object(i.c)();e.trans=Object(d.a)(e.trans,await Object(d.d)(e.context||e.title,t.ctxTrans));try{await Object(p.f)("notebook",e)}catch(e){}}}();break;case"popup_options":Object(h.b)("options.html",!0);break;case"popup_standalone":h.a.send({type:"OPEN_QS_PANEL"});break;default:!async function(e){const t={menuItemId:e};try{const e=(await browser.tabs.query({active:!0,currentWindow:!0}))[0];if(e&&e.url&&(t.linkUrl=e.url,e.id))try{const a=await h.a.send(e.id,{type:"PRELOAD_SELECTION"});a&&a.text&&(t.selectionText=a.text)}catch(e){}}catch(e){}h.a.send({type:"CONTEXT_MENUS_CLICK",payload:t})}(e.baOpen)}})},239:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(379),c=a.n(n),r=a(121),o=a.n(r),l=a(380),s=a.n(l),i=a(1),h=a(101);async function p(e){let t=(await i.c.sync.get("gacid")).gacid;t||(t=s()(),i.c.sync.set({gacid:t}));const a=new c.a,n=a.getBrowser(),r=a.getOS();try{await o()({url:"https://www.google-analytics.com/collect",method:"post",headers:{"content-type":"text/plain;charset=UTF-8"},data:new URLSearchParams({v:"1",tid:"UA-49163616-4",cid:t,t:"pageview",dp:e,cd1:n.name||"None",cd2:(n.version||"0.0").split(".").slice(0,3).join("."),cd3:r.name||"None",cd4:r.version||"0.0",de:"UTF-8",dl:document.location.href,sd:screen.colorDepth+"-bit",sr:screen.width+"x"+screen.height,ul:"zh-cn",z:Object(h.a)()})})}catch(e){console.log("ga report failed")}}},967:function(e,t,a){e.exports=a(1276)},973:function(e,t,a){}},[[967,0,1,6,22,7]]]);